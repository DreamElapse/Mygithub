webpackJsonp([27],{353:function(e,t,i){var s,n,d={};i(354),s=i(356),n=i(362),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var a="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(a.template=n),a.computed||(a.computed={}),Object.keys(d).forEach(function(e){var t=d[e];a.computed[e]=function(){return t}})},354:function(e,t,i){var s=i(355);"string"==typeof s&&(s=[[e.id,s,""]]);i(22)(s,{});s.locals&&(e.exports=s.locals)},355:function(e,t,i){t=e.exports=i(3)(),t.push([e.id,".input-select[_v-8d25df38]{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex}.input-select select[_v-8d25df38]{width:25%}.order-list[_v-8d25df38]{padding:0 .8rem;border:1px solid #e1e1e1;border-width:1px 0;background:#fff;color:#696969}.order-list .input-item[_v-8d25df38]:first-child{border-top:0}.input-item[_v-8d25df38]{height:2.4rem;border-top:1px solid #e1e1e1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.input-item span[_v-8d25df38]{width:5rem;font-size:.9rem;display:block}.input-item input[_v-8d25df38],.input-item textarea[_v-8d25df38]{border:0;font-size:1em;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}.input-textarea[_v-8d25df38]{height:5rem}.input-textarea span[_v-8d25df38]{line-height:2.4rem;-ms-flex-item-align:start;align-self:flex-start}.input-textarea textarea[_v-8d25df38]{padding:.6rem 0;font-size:1em;-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;align-self:stretch}.order-item[_v-8d25df38]{margin:.4rem 0;border:1px solid #e1e1e1;border-width:1px 0;background:#fff}.order-hd.on .font[_v-8d25df38]{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.order-hd.on+dd[_v-8d25df38]{display:block}.order-hd[_v-8d25df38]{height:2.4rem;padding:0 .8rem;font-size:.9rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.order-hd span[_v-8d25df38]{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}.order-hd .font[_v-8d25df38]{margin-left:.8rem;-webkit-transition:.6s ease-out;transition:.6s ease-out}.order-item dd[_v-8d25df38]{border-top:1px solid #e1e1e1;display:none}.order-item dd>[_v-8d25df38]:last-child{border-bottom:0}.select-box .item[_v-8d25df38]{height:2.4rem;padding:0 .8rem;margin-bottom:.2rem;background:#f8f8f8;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.select-box label span[_v-8d25df38]{font-size:.9rem;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}.btn-block[_v-8d25df38]{line-height:2.8rem;background:#c50007;color:#fff;display:block}",""])},356:function(e,t,i){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(25),d=i(31),a=i(357),o=s(a);t.default={components:{SelectRegion:o.default},vuex:{getters:{isLogin:n.isLogin,defaultAddress:n.defaultAddress},actions:{updateAppHeader:d.updateAppHeader,updateAddress:d.updateAddress,getDefaultAddress:d.getDefaultAddress}},route:{data:function e(){var t=this;if(this.address_id=parseInt(this.$route.params.id),this.updateAppHeader({type:2,content:0==this.isLogin?"填写地址":this.address_id<0?"添加地址":"编辑地址"}),this.address_id>0){var e={address_id:this.address_id};this.$http.post("/UserAddress/Info.json",e).then(function(e){e=e.json(),1==e.status&&(t.consignee=e.data.consignee,t.mobile=e.data.mobile,t.isChangeTel=e.data.mobile,t.regionData[0].id=e.data.province,t.regionData[0].name=e.data.province_name,t.regionData[1].id=e.data.city,t.regionData[1].name=e.data.city_name,t.regionData[2].id=e.data.district,t.regionData[2].name=e.data.district_name,t.regionData[3].id=e.data.town,t.regionData[3].name=e.data.town_name,t.address=e.data.address,t.attribute=e.data.attribute)})}else 0==this.address_id&&this.getDefaultAddress()}},ready:function(){e(".order-hd").on("click",function(){e(this).toggleClass("on")})},data:function(){return{address_id:"",consignee:"",mobile:"",isChangeTel:"",regionData:[{id:0,name:""},{id:0,name:""},{id:0,name:""},{id:0,name:""}],districtID:0,address:"",attribute:"家庭"}},watch:{defaultAddress:function(e){this.consignee=e.consignee,this.mobile=e.mobile,this.regionData[0].id=e.province,this.regionData[0].name=e.province_name,this.regionData[1].id=e.city,this.regionData[1].name=e.city_name,this.regionData[2].id=e.district,this.regionData[2].name=e.district_name,this.regionData[3].id=e.town,this.regionData[3].name=e.town_name,this.address=e.address,this.attribute=e.attribute}},computed:{region:function(){for(var e="",t=0;t<this.regionData.length&&!(t>=3);t++)e+=this.regionData[t].name;return e}},methods:{test_consignee:function(){return""!=this.consignee||(this.$dispatch("popup","收货人不能为空"),!1)},test_mobile:function(){return""==this.mobile?(this.$dispatch("popup","联系电话不能为空"),!1):!(!/^1[34578]\d{9}$/.test(this.mobile)&&this.mobile!=this.isChangeTel)||(this.$dispatch("popup","联系电话格式不正确"),!1)},test_region:function(){return""!=this.region||(this.$dispatch("popup","所在区域不能为空"),!1)},test_address:function(){return""!=this.address||(this.$dispatch("popup","详细地址不能为空"),!1)},validate:function(){for(var e=["consignee","mobile","region","address"],t=0;t<e.length;t++){var i=e[t];if(!this["test_"+i]())return!1}return!0},selectRegion:function(e,t){e.target.blur(),"undefined"!=typeof t?this.$refs.select.show(t):this.$refs.select.show()},saveAddress:function(){var e=this;if(0!=this.validate()){var t={address_id:this.address_id,consignee:this.consignee,mobile:this.mobile,province:this.regionData[0].id,city:this.regionData[1].id,district:this.regionData[2].id,town:this.regionData[3].id,address:this.address,attribute:this.attribute};this.$http.post("/UserAddress/Save.json",t).then(function(i){i=i.json(),1==i.status?(t.region=e.region,e.updateAddress(t),1==e.isLogin&&e.$dispatch("popup","地址保存成功"),window.history.back()):e.$dispatch("popup",i.msg)})}}},events:{setRegion:function(e){this.regionData=e,this.districtID=e[2].id}}}}).call(t,i(24))},357:function(e,t,i){var s,n,d={};i(358),s=i(360),n=i(361),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports.default);var a="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(a.template=n),a.computed||(a.computed={}),Object.keys(d).forEach(function(e){var t=d[e];a.computed[e]=function(){return t}})},358:function(e,t,i){var s=i(359);"string"==typeof s&&(s=[[e.id,s,""]]);i(22)(s,{});s.locals&&(e.exports=s.locals)},359:function(e,t,i){t=e.exports=i(3)(),t.push([e.id,".region-box[_v-351208b8]{width:100%;height:100%;background:#eee;position:fixed;top:0;z-index:9999;opacity:0;visibility:hidden}.region-box.on[_v-351208b8]{opacity:1;-webkit-transition:.4s ease-out;transition:.4s ease-out;visibility:visible}.region-hd[_v-351208b8]{height:2.6rem;padding:0 .8rem;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex}.region-hd[_v-351208b8],.region-hd span[_v-351208b8]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.region-hd span[_v-351208b8]{height:100%;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;display:-webkit-inline-flex}.region-hd .font[_v-351208b8]{margin-right:.4rem}.region-hd span em[_v-351208b8]{line-height:1}.region-box ul[_v-351208b8]{height:100%;background:#fff;overflow-y:scroll;-webkit-overflow-scrolling:touch}.region-box li[_v-351208b8]{height:2.6rem;padding:0 .8rem;border-top:1px solid #e1e1e1;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.region-box li[_v-351208b8]:first-child{border-top:0}.region-box li span[_v-351208b8]{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}",""])},360:function(e,t,i){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{loading:!1,regionIndex:1,regionList:"",regionData:[{id:0,name:""},{id:0,name:""},{id:0,name:""},{id:0,name:""}],selectTown:!1}},methods:{show:function(t){e(this.$el).addClass("on"),0==this.regionData[2].id&&(this.regionList=""),"undefined"!=typeof t?t>0?(this.selectTown=!0,this.regionList="",this.findRegion(t)):(window.alert("你还没填写所在区域信息"),this.close()):(this.selectTown=!1,this.regionIndex=1,this.findRegion(1))},back:function(){return this.regionIndex-=1,this.selectTown?void this.close():this.regionIndex<=0?void this.close():void this.findRegion(this.regionIndex)},close:function(){e(this.$el).removeClass("on"),this.$dispatch("setRegion",this.regionData)},findRegion:function(e){var t=this;if(!this.loading){this.loading=!0;var i={parent_id:e};this.$http.post("/Region/Lists.json",i).then(function(e){e=e.json(),1==e.status?(t.regionList=e.data,t.selectTown&&0==e.data.length&&(window.alert("暂无街道信息"),t.close()),t.$nextTick(function(){t.loading=!1})):t.loading=!1},function(){t.loading=!1})}},select:function(e){var t=e.region_id,i=e.region_type;return this.regionIndex=i,this.regionData[i-1].id=t,this.regionData[i-1].name=e.region_name,i>=3?(0==this.selectTown&&(this.regionData[3].id=0,this.regionData[3].name=""),void this.close()):void this.findRegion(t)}}}}).call(t,i(24))},361:function(e,t){e.exports=' <div class=region-box _v-351208b8=""> <div v-show=loading class=loading _v-351208b8=""></div> <div class=region-hd _v-351208b8=""> <span @click=back _v-351208b8=""><i class="font icon-arrow-left" _v-351208b8=""></i><em _v-351208b8="">选择地区</em></span> </div> <ul _v-351208b8=""> <li v-for="item in regionList" @click=select(item) _v-351208b8=""> <span _v-351208b8="">{{item.region_name}}</span><i class="font icon-arrow-right" _v-351208b8=""></i> </li> </ul> </div> '},362:function(e,t){e.exports=' <div class=container _v-8d25df38=""> <div class=order-list _v-8d25df38=""> <label class=input-item _v-8d25df38=""><span _v-8d25df38="">收货人</span><input type=text v-model=consignee _v-8d25df38=""></label> <label class=input-item _v-8d25df38=""><span _v-8d25df38="">联系电话</span><input type=text v-model=mobile _v-8d25df38=""></label> <label class=input-item _v-8d25df38=""><span _v-8d25df38="">所在区域</span><input type=text v-model=region @focus.prevent=selectRegion($event) _v-8d25df38=""></label> <label class=input-item _v-8d25df38=""><span _v-8d25df38="">街道</span><input type=text v-model=regionData[3].name @focus.prevent="selectRegion($event, districtID)" _v-8d25df38=""></label> <label class="input-item input-textarea" _v-8d25df38=""><span _v-8d25df38="">详细地址</span><textarea v-model=address _v-8d25df38=""></textarea></label> </div> <dl class="order-item select-box" _v-8d25df38=""> <dt class=order-hd _v-8d25df38=""> <span _v-8d25df38="">属性</span> <i class="font icon-arrow-bottom" _v-8d25df38=""></i> </dt> <dd class=select-box _v-8d25df38=""> <label class=item _v-8d25df38=""><span _v-8d25df38="">公司</span><input class=checkbox type=radio value=公司 v-model=attribute _v-8d25df38=""></label> <label class=item _v-8d25df38=""><span _v-8d25df38="">家庭</span><input class=checkbox type=radio value=家庭 v-model=attribute _v-8d25df38=""></label> <label class=item _v-8d25df38=""><span _v-8d25df38="">代收</span><input class=checkbox type=radio value=代收 v-model=attribute _v-8d25df38=""></label> <label class=item _v-8d25df38=""><span _v-8d25df38="">物业</span><input class=checkbox type=radio value=物业 v-model=attribute _v-8d25df38=""></label> </dd> </dl> <a v-else="" class="btn btn-block" href=javascript:; @click=saveAddress _v-8d25df38="">提交</a> <select-region v-ref:select="" v-on:setregion="" _v-8d25df38=""></select-region> </div> '}});