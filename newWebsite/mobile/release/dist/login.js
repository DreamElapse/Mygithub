webpackJsonp([6],{204:function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(151),r=o(a);e.default={data:function(){return{mobile:"",sending:!1,codeInterval:null}},computed:{btnSMSDisabled:function(){return!/^1[34578]\d{9}$/.test(this.mobile)||0!=this.sending}},methods:{test_mobile:function(){return""==this.mobile?(this.$dispatch("popup","手机号不能为空"),!1):!!/^1[34578]\d{9}$/.test(this.mobile)||(this.$dispatch("popup","手机号格式不正确"),!1)},test_old_password:function(){return""==this.old_password?(this.$dispatch("popup","原密码不能为空"),!1):!!/^\S{6,}$/.test(this.old_password)||(this.$dispatch("popup","原密码最少6位"),!1)},test_password:function(){return""==this.password?(this.$dispatch("popup","密码不能为空"),!1):!!/^\S{6,}$/.test(this.password)||(this.$dispatch("popup","密码最少6位"),!1)},test_re_password:function(){return this.password==this.re_password||(this.$dispatch("popup","2次输入的密码不一致"),!1)},test_code:function(){return""==this.code?(this.$dispatch("popup","验证码不能为空"),!1):!!/^\d{4,6}$/.test(this.code)||(this.$dispatch("popup","验证码错误"),!1)},test_username:function(){return""==this.username?(this.$dispatch("popup","用户账号不能为空"),!1):!!/(^1[34578]\d{9}$)|(\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14})/.test(this.username)||(this.$dispatch("popup","用户账号格式不正确"),!1)},validate:function(t){var e=!0,i=!1,o=void 0;try{for(var a,n=(0,r.default)(t);!(e=(a=n.next()).done);e=!0){var s=a.value;if(!this["test_"+s]())return!1}}catch(t){i=!0,o=t}finally{try{!e&&n.return&&n.return()}finally{if(i)throw o}}return!0},getSMS:function(t){var e=this;if(!this.btnSMSDisabled){this.sending=!0,this.getCodeInterval(t.target);var i={mobile:this.mobile};this.$http.post("/User/sendSms.json",i).then(function(t){t=t.json(),1==t.status?e.$dispatch("popup","验证码已发送到手机"):e.$dispatch("popup",t.msg)})}},getCodeInterval:function(t){var e=this,i=60;this.codeInterval=setInterval(function(){return i<=0?(clearInterval(e.codeInterval),e.sending=!1,void(t.innerHTML="获取验证码")):void(t.innerHTML="("+i--+")重发")},1e3)}}}},206:function(t,e,i){var o,a,r={};i(207),o=i(209),a=i(210),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var n="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(n.template=a),n.computed||(n.computed={}),Object.keys(r).forEach(function(t){var e=r[t];n.computed[t]=function(){return e}})},207:function(t,e,i){var o=i(208);"string"==typeof o&&(o=[[t.id,o,""]]);i(22)(o,{});o.locals&&(t.exports=o.locals)},208:function(t,e,i){e=t.exports=i(3)(),e.push([t.id,'.container[_v-7b3e49a3]{background:#fff}.input-form[_v-7b3e49a3]{border-bottom:1px solid #e1e1e1}.input-item[_v-7b3e49a3]{height:3rem;margin:0 .8rem;border-top:1px solid #e1e1e1;font-size:.9rem;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.input-item[_v-7b3e49a3]:first-child{border-top:0}.input-item .font[_v-7b3e49a3]{width:2.4rem;font-size:1.5rem;display:block}.input-item input[_v-7b3e49a3]{height:100%;border:0;font-size:1em;display:block;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1}.input-item .input-msg[_v-7b3e49a3]{color:#f03439}.input-item .img-code[_v-7b3e49a3]{width:6rem;cursor:pointer;display:block}.input-item .btn[_v-7b3e49a3]{width:6rem;line-height:2.2rem;background:#202020;border-radius:4px;-webkit-transition:1s ease-out;transition:1s ease-out}.input-item .btn.disabled[_v-7b3e49a3]{background:#d2d2d2}.btn-block[_v-7b3e49a3]{width:90%;line-height:3rem;margin:.8rem auto;border-radius:8px;background:#202020;display:block}.btn-block.disabled[_v-7b3e49a3]{background:#d2d2d2}.login-action[_v-7b3e49a3]{font-size:.9rem;text-align:center}.login-action i[_v-7b3e49a3]{width:1px;height:1rem;margin:0 1rem;background:#c7c7c7;display:inline-block;vertical-align:text-bottom}.login-action .hl[_v-7b3e49a3]{color:#f40c1d}.reminder[_v-7b3e49a3]{padding:0 .8rem;font-size:.9rem;color:#202020}.reminder dt[_v-7b3e49a3]{padding-bottom:.2rem}.reminder p[_v-7b3e49a3]{margin:.1rem 0;color:#949494}.popup-wrap[_v-7b3e49a3]{width:100%;height:100%;position:fixed;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.popup-wrap.close[_v-7b3e49a3]{opacity:0;-webkit-transition:1s ease-out;transition:1s ease-out}.popup-wrap span[_v-7b3e49a3]{padding:.6rem 1rem;border-radius:4px;background:rgba(32,32,32,.85);color:#fff}.loginLoading[_v-7b3e49a3]{margin-top:30%;text-align:center}.loginLoading .isLoading[_v-7b3e49a3]{display:inline-block}.loginLoading span[_v-7b3e49a3]{font-size:1rem;margin-top:1rem;display:table-cell;vertical-align:middle}.loadingTimer[_v-7b3e49a3]{display:table-cell}.isShowLogin[_v-7b3e49a3]{display:none}.isShowLogin.on[_v-7b3e49a3]{display:block}.wrapper[_v-7b3e49a3]{width:110px;max-width:100%}aside[_v-7b3e49a3]{float:left;width:50%;margin:60px 0 40px}aside h1[_v-7b3e49a3]{margin-bottom:0}aside .sup[_v-7b3e49a3]{font-style:italic;color:#999;margin-top:4px}@-webkit-keyframes timerRotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}}@keyframes timerRotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}}@-webkit-keyframes bottomFill{0%{border-bottom-width:0}50%{border-bottom-width:12px}to{border-bottom-width:12px}}@keyframes bottomFill{0%{border-bottom-width:0}50%{border-bottom-width:12px}to{border-bottom-width:12px}}@-webkit-keyframes topEmpty{0%{top:3px;border-top-width:12px;border-left-width:7px;border-right-width:7px}50%{top:16px;border-top-width:0;border-left-width:0;border-right-width:0}to{top:16px;border-top-width:0;border-left-width:0;border-right-width:0}}@keyframes topEmpty{0%{top:3px;border-top-width:12px;border-left-width:7px;border-right-width:7px}50%{top:16px;border-top-width:0;border-left-width:0;border-right-width:0}to{top:16px;border-top-width:0;border-left-width:0;border-right-width:0}}.loader[_v-7b3e49a3]{width:50%;height:200px;float:left;-webkit-transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000}.timerWrap[_v-7b3e49a3]{position:relative;animation:timerRotate 1s infinite ease;-webkit-animation:timerRotate 1s infinite ease;-moz-animation:timerRotate 1s infinite ease;-ms-animation:timerRotate 1s infinite ease;width:24px;height:32px;display:inline-block;margin-right:10px}.timerWrap[_v-7b3e49a3]:before{border-width:12px 7px 0;border-color:red transparent transparent;top:3px;animation:topEmpty 1s infinite ease;-webkit-animation:topEmpty 1s infinite ease;-moz-animation:topEmpty 1s infinite ease;-ms-animation:topEmpty 1s infinite ease}.timerWrap[_v-7b3e49a3]:after,.timerWrap[_v-7b3e49a3]:before{content:"";width:0;height:0;border-style:solid;position:absolute;left:0;right:0;margin:auto}.timerWrap[_v-7b3e49a3]:after{border-width:0 7px 12px;border-color:transparent transparent red;bottom:3px;animation:bottomFill 1s infinite ease;-webkit-animation:bottomFill 1s infinite ease;-moz-animation:bottomFill 1s infinite ease;-ms-animation:bottomFill 1s infinite ease}.timerWrap .timer[_v-7b3e49a3]{width:24px;height:32px;position:relative;top:0;left:0}.timerWrap .timer path[_v-7b3e49a3]{fill:#000}',""])},209:function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(204),r=o(a),n=i(25),s=i(31);e.default={mixins:[r.default],vuex:{getters:{isLogin:n.isLogin},actions:{updateAppHeader:s.updateAppHeader,updateUser:s.updateUser,setIsLogin:s.setIsLogin,getCartGoodsQty:s.getCartGoodsQty}},route:{data:function(t){var e=this;this.updateAppHeader({type:2,content:"用户登录"}),this.isShowLogin=!1,this.$watch("isLogin",function(i){1==i?"protect_right"==t.from.name?e.$route.router.replace({name:"protect_right"}):e.$route.router.replace({name:"user"}):(e.unLogin=!0,e.isShowLogin=!0)},{immediate:!0})}},data:function(){return{mobile:"",password:"",code:"",showCode:!!sessionStorage.showLoginCode,imgCodeRandom:"",isShowLogin:!1,unLogin:!1}},computed:{imgCode:{get:function(){return"/User/verify.json?random="+this.imgCodeRandom},set:function(t){this.imgCodeRandom=t}}},methods:{test_username:function(){return""==this.mobile?(this.$dispatch("popup","账号不能为空"),!1):!!/^1[34578]\d{9}$/.test(this.mobile)||(this.$dispatch("popup","账号格式不正确"),!1)},getImgCode:function(){this.imgCode=Math.random()},login:function(){var t=this;if(this.validate(["username","password"])){var e={username:this.mobile,password:this.password};this.showCode&&(e.code=this.code),this.$http.post("/User/login.json",e).then(function(e){if(e=e.json(),1==e.status){var i=e.data;t.updateUser({name:i.user_name,portrait:i.photo_url,level:i.level,curPoint:i.min_points,maxPoint:i.max_points}),t.setIsLogin(!0),t.getCartGoodsQty(!0),t.$dispatch("popup","登录成功！"),t.$route.router.go({name:"user"})}else t.imgCode=Math.random(),t.$dispatch("popup",e.msg),e.data>=3&&(sessionStorage.showLoginCode=!0,t.showCode=!0)})}}}}},210:function(t,e){t.exports=' <div class=container _v-7b3e49a3=""> <div class=isShowLogin :class="{on: unLogin}" v-if=isShowLogin _v-7b3e49a3=""> <form id=form action="" method=post _v-7b3e49a3=""> <div class=input-form _v-7b3e49a3=""> <label class=input-item _v-7b3e49a3=""> <i class="font icon-user" _v-7b3e49a3=""></i><input type=text placeholder=请输入手机号码 v-model=mobile _v-7b3e49a3=""> </label> <label class=input-item _v-7b3e49a3=""> <i class="font icon-password" _v-7b3e49a3=""></i><input type=password placeholder=请输入6个字符，数字或字母 v-model=password _v-7b3e49a3=""> </label> <label class=input-item v-show=showCode _v-7b3e49a3=""> <i class="font icon-validate-code" _v-7b3e49a3=""></i><input type=text placeholder=请输入验证码 v-model=code _v-7b3e49a3=""> <img class=img-code :src=imgCode alt="" @click=getImgCode _v-7b3e49a3=""> </label> </div> <a class="btn btn-block" href=javascript:; @click=login _v-7b3e49a3="">立 即 登 录</a> </form> <div class=login-action _v-7b3e49a3=""> <a class=hl v-link="{ name: \'regist\' }" _v-7b3e49a3="">立即注册</a><i _v-7b3e49a3=""></i><a v-link="{ name: \'findPassword\' }" _v-7b3e49a3="">忘记密码？</a> </div> </div> <div class=loginLoading v-else="" _v-7b3e49a3=""> <div class=isLoading _v-7b3e49a3=""> <div class=loadingTimer _v-7b3e49a3=""> <div class=timerWrap _v-7b3e49a3=""> <svg version=1.1 viewBox="131.623 175.5 120 160" preserveAspectRatio="xMinYMin meet" class=timer _v-7b3e49a3=""> <path fill=#FFFFFF d="M212.922,255.45l36.855-64.492c1.742-3.069,1.742-6.836-0.037-9.896c-1.783-3.06-5.037-4.938-8.581-4.938\n\t\t\t\t\th-99.158c-3.524,0-6.797,1.878-8.569,4.938c-1.773,3.06-1.792,6.827-0.03,9.896l36.846,64.491l-36.845,64.492\n\t\t\t\t\tc-1.762,3.068-1.743,6.836,0.03,9.896c1.772,3.061,5.044,4.938,8.569,4.938h99.158c3.544,0,6.798-1.878,8.581-4.938\n\t\t\t\t\tc1.779-3.06,1.779-6.827,0.037-9.896L212.922,255.45z M142.001,324.86l39.664-69.41l-39.664-69.41h99.158l-39.663,69.41\n\t\t\t\t\tl39.663,69.41H142.001z" _v-7b3e49a3=""></path> </svg> </div> </div> <span _v-7b3e49a3="">正常努力加载中~~~</span> </div> </div> </div> '}});