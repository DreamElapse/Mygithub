webpackJsonp([19],{312:function(e,a,t){var i,d,s={};t(313),i=t(315),d=t(322),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var n="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;d&&(n.template=d),n.computed||(n.computed={}),Object.keys(s).forEach(function(e){var a=s[e];n.computed[e]=function(){return a}})},313:function(e,a,t){var i=t(314);"string"==typeof i&&(i=[[e.id,i,""]]);t(22)(i,{});i.locals&&(e.exports=i.locals)},314:function(e,a,t){a=e.exports=t(3)(),a.push([e.id,".container[_v-d260790a]{background:#f4f4f4}.hl[_v-d260790a]{color:#c50007}.address[_v-d260790a]{padding:.8rem 1rem 1rem;background:url(/public/images/payment/address_border.jpg) repeat-x 0 100%;background-size:auto .2rem;font-size:.8rem;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-align-items:flex-start}.address label[_v-d260790a]{width:4rem;text-align:left}.address label .font[_v-d260790a]{font-size:1.6rem;display:block}.address>div[_v-d260790a]{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1}.address .action[_v-d260790a]{font-size:.9rem;text-align:right}.address .action a[_v-d260790a]{color:#929292;margin-left:1rem}.address-none[_v-d260790a]{height:5rem;font-size:1rem;color:#929292;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.order-item[_v-d260790a]{margin:.4rem 0;border:1px solid #e1e1e1;border-width:1px 0;background:#fff}.order-hd.on .font[_v-d260790a]{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.order-hd.on+dd[_v-d260790a]{display:block}.order-hd[_v-d260790a]{height:2.4rem;padding:0 .8rem;font-size:.9rem;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.order-hd span[_v-d260790a]{padding-right:.8rem;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}.order-hd .font[_v-d260790a]{margin-left:.8rem;-webkit-transition:.6s ease-out;transition:.6s ease-out}.order-item dd[_v-d260790a]{border-top:1px solid #e1e1e1;display:none}.order-item dd>[_v-d260790a]:last-child{border-bottom:0}.order-item .order-list[_v-d260790a]{border:0}.order-list[_v-d260790a]{padding:0 .8rem;background:#fff;color:#696969}.order-list .item[_v-d260790a]{height:2.4rem;border-bottom:1px solid #e1e1e1;font-size:.9rem;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.order-list .item.textarea[_v-d260790a]{height:4.8rem}.order-list .item.textarea textarea[_v-d260790a]{height:100%;padding:.4rem;margin-left:3rem;border:0;font-size:1em;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;resize:none}.order-list .item[_v-d260790a]:last-child{border-bottom:0}.order-list label .checkbox[_v-d260790a]{margin-right:.2rem}.order-list .item span[_v-d260790a]{text-align:right;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}.goods-list[_v-d260790a]{padding:0}.goods-list li[_v-d260790a]{padding:.8rem;background:#f8f8f8;border-bottom:1px solid #e1e1e1;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.goods-list li[_v-d260790a]:last-child{border-bottom:0}.goods-img[_v-d260790a]{width:4rem;height:4rem;border:1px solid #e1e1e1;background:#fff;text-align:center;display:block}.goods-img img[_v-d260790a]{max-height:100%}.goods-detail[_v-d260790a]{padding-left:1rem;font-size:.9rem;text-align:right;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1}.goods-detail p[_v-d260790a]:nth-child(n+2){color:#adadad}.select-box[_v-d260790a]{margin:0;border-top:0}.select-box label[_v-d260790a]{height:2.4rem;padding:0 .8rem;margin-bottom:.2rem;background:#f8f8f8;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.select-box label img[_v-d260790a]{width:1.4rem;margin-right:.4rem}.select-box label span[_v-d260790a]{font-size:.9rem;-webkit-box-flex:1;-ms-flex:1;flex:1}.order-row[_v-d260790a]{height:2.4rem;padding:0 .8rem;border-bottom:1px solid #e1e1e1;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.order-row span[_v-d260790a]{font-size:.9rem;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1}.order-total[_v-d260790a]{width:100%;height:3rem;border:1px solid #e1e1e1;border-width:1px 0;background:#fff;display:table}.order-total>[_v-d260790a]{display:table-cell;vertical-align:middle}.order-total>div[_v-d260790a]:first-child{padding-left:.8rem}.order-total strong[_v-d260790a]{font-size:1rem}.order-total .btn[_v-d260790a]{width:25%;background:#c50007}.input-coupon[_v-d260790a]{width:100%;height:2.4rem;border-top:1px solid #e1e1e1;font-size:.9rem;display:table}.input-coupon>[_v-d260790a]{display:table-cell;vertical-align:middle}.input-coupon label[_v-d260790a]{width:100%;padding:0 .4rem 0 .8rem;display:table}.input-coupon label em[_v-d260790a]{display:table-cell;vertical-align:middle;white-space:nowrap}.input-coupon label input[_v-d260790a]{width:100%;border:0;font-size:1em;color:#c50007;text-align:right;vertical-align:middle}.input-coupon .btn[_v-d260790a]{width:25%;background:#c50007;color:#fff;display:table-cell;vertical-align:middle}",""])},315:function(e,a,t){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var d=t(151),s=i(d),n=t(25),o=t(31),l=t(316),r=i(l);a.default={components:{Pay:r.default},vuex:{getters:{user:n.user,isLogin:n.isLogin},actions:{updateAppHeader:o.updateAppHeader}},route:{data:function(){var e=this;this.updateAppHeader({type:2,content:"订单确认"}),this.$http.post("/OnlinePayment/checkWechatPay.json").then(function(a){a=a.json(),1==a.status&&(e.supportwechatpay=1==a.data.result,e.payType=1==a.data.result?18:4,e.payment=1==a.data.result?18:4,e.$http.post("/UserAddress/Defaults.json").then(function(a){if(a=a.json(),1==a.status){var t=a.data;t&&(e.defAddress=t),e.getOrderDetail()}else e.getOrderDetail()}))}),this.$http.post("/OnlinePayment/getGoodsList.json").then(function(a){a=a.json(),1==a.status&&e.$set("goodsList",a.data)}),this.$http.post("/OnlinePayment/getBonusList.json").then(function(a){a=a.json(),1==a.status&&e.$set("coupons",a.data.list)})}},ready:function(){e(".order-hd").on("click",function(){e(this).toggleClass("on")})},data:function(){return{pending:!0,supportwechatpay:!0,payType:4,defAddress:"",goodsList:[],coupons:[],couponCode:"",couponID:0,remark:"",goods_price:0,shipping_fee:0,will_get_integral:0,amount:0,token:""}},watch:{payType:function(e){this.pending||this.getOrderDetail()}},computed:{couponsQuantity:function(){var e=0,a=!0,t=!1,i=void 0;try{for(var d,n=(0,s.default)(this.coupons);!(a=(d=n.next()).done);a=!0){var o=d.value;e+=o.count}}catch(e){t=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(t)throw i}}return e}},methods:{couponChange:function(e,a){e.preventDefault(),this.couponID=a,this.getOrderDetail()},applyCoupon:function(){var e=this;this.$http.post("/OnlinePayment/checkBonus.json",{bonus_sn:this.couponCode}).then(function(a){if(a=a.json(),1==a.status){var t=!0,i=!1,d=void 0;try{for(var n,o=(0,s.default)(e.coupons);!(t=(n=o.next()).done);t=!0){var l=n.value;if(l.type_id==a.data.type_id){e.couponID=a.data.type_id;break}e.coupons.push(a.data),e.couponID=a.data.type_id;break}}catch(e){i=!0,d=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw d}}e.getOrderDetail(),e.$dispatch("popup","此优惠券可以使用")}else e.couponCode="",e.$dispatch("popup",a.msg)})},getOrderDetail:function(e){var a=this,t={bonus_type:this.couponID,payment_id:this.$refs.pay.payType};return e&&(t.payment_id=e),void 0!=this.defAddress.address_id&&(t.address_id=this.defAddress.address_id),this.$http.post("/OnlinePayment/Aggregate.json",t).then(function(e){if(e=e.json(),1==e.status){a.pending=!1;var t=e.data;a.goods_price=t.goods_price,a.shipping_fee=t.shipping_fee,a.will_get_integral=t.will_get_integral,a.amount=t.amount,a.token=t.token}else a.$dispatch("popup",e.msg);a.pending=!1},function(){a.pending=!1})}},events:{payType:function(e){this.payType=e}}}}).call(a,t(24))},316:function(e,a,t){var i,d,s={};t(317),i=t(319),d=t(321),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var n="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;d&&(n.template=d),n.computed||(n.computed={}),Object.keys(s).forEach(function(e){var a=s[e];n.computed[e]=function(){return a}})},317:function(e,a,t){var i=t(318);"string"==typeof i&&(i=[[e.id,i,""]]);t(22)(i,{});i.locals&&(e.exports=i.locals)},318:function(e,a,t){a=e.exports=t(3)(),a.push([e.id,".payment-way[_v-1921183f]{border:1px solid #e1e1e1;border-width:1px 0;background:#fff}.payment-way>dt[_v-1921183f]{border:0;font-weight:700}.pay-item[_v-1921183f]{margin:.4rem 0}.pay-row.on .font[_v-1921183f]{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.pay-row[_v-1921183f]{height:2.4rem;padding:0 .8rem;border-top:1px solid #e1e1e1;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.pay-row span[_v-1921183f]{font-size:.9rem;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}.pay-row .font[_v-1921183f]{margin-left:.8rem;-webkit-transition:.6s ease-out;transition:.6s ease-out;display:table-cell;vertical-align:middle}.pay-item dd[_v-1921183f]{border-top:1px solid #e1e1e1}.select-box[_v-1921183f]{margin:0;border-top:0}.select-box label[_v-1921183f]{height:2.4rem;padding:0 .8rem;margin-bottom:.2rem;background:#f8f8f8;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-items:center}.select-box label img[_v-1921183f]{width:1.4rem;margin-right:.4rem}.select-box label span[_v-1921183f]{font-size:.9rem;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-flex:1;display:block}.select-box label span i[_v-1921183f]{color:red}.pay-submit[_v-1921183f]{width:100%;height:3rem;border-bottom:1px solid #e1e1e1;background:#fff;display:table}.pay-submit>[_v-1921183f]{display:table-cell;vertical-align:middle}.pay-submit>div[_v-1921183f]:first-child{padding-left:.8rem}.pay-submit strong[_v-1921183f]{font-size:1rem;color:#c50007}.pay-submit span[_v-1921183f]{font-size:.9rem;color:#c50007;margin-left:.4rem}.pay-submit .btn[_v-1921183f]{width:30%;background:#c50007}",""])},319:function(e,a,t){(function(e,i){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var s=t(320),n=d(s),o=t(31);a.default={mixins:[n.default],vuex:{actions:{getCartGoodsQty:o.getCartGoodsQty}},ready:function(){},data:function(){return{pending:!1,bankList:null}},props:{quickPay:{type:Boolean,default:!1},supportwechatpay:"",payType:"",amount:{type:Number},will_get_integral:{type:Number},remark:{type:String},token:{type:String}},watch:{payType:function(){this.$dispatch("payType",this.payType)}},methods:{submit:function(){var e=this;this.pending=!0;var a={remark:this.remark,token:this.token};a.source_url=localStorage.source_url,this.$http.post("/OnlinePayment/CreateOrder.json",a).then(function(a){a=a.json(),1==a.status?(e.$dispatch("popup","提交成功"),e.$emit("payAction",a.data.payment_id,a.data.content)):e.$dispatch("popup",a.msg),e.pending=!1},function(){e.pending=!1}).catch(function(){e.pending=!1})}},events:{payAction:function(a,t){var d=this,s=e.extend({template:t});(new s).$mount().$appendTo("#payAction",function(){switch(a){case 1:d.$route.router.go({name:"paySuccess"}),d.getCartGoodsQty(!0);break;case 4:i("#alipaysubmit").submit();break;case 8:i("#kuaiqian_submit").click();break;case 18:i("#wechatpay_button").click();break;case 7:i("#tenpay_button").click();break;default:i("#tenpay_button").click()}})}}}}).call(a,t(6),t(24))},320:function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={ready:function(){this.bankList=[{name:"中国工商银行",icon:"bank_gs.png",value:1002},{name:"中国农业银行",icon:"bank_ny.jpg",value:1005},{name:"中国银行",icon:"bank_zg.png",value:1052},{name:"中国建设银行",icon:"bank_js.png",value:1003},{name:"招商银行",icon:"bank_zs.jpg",value:1001},{name:"浦发银行",icon:"bank_pf.jpg",value:1004},{name:"中国民生银行",icon:"bank_ms.jpg",value:1006},{name:"兴业银行",icon:"bank_xy.jpg",value:1009},{name:"中国光大银行",icon:"bank_gd.jpg",value:1022},{name:"平安银行",icon:"bank_pn.jpg",value:1010},{name:"中信银行",icon:"bank_zx.png",value:1021},{name:"华夏银行",icon:"bank_hx.jpg",value:1025},{name:"中国邮政蓄储银行",icon:"bank_yz.jpg",value:1028},{name:"广发银行",icon:"bank_gf.jpg",value:1027}]}}},321:function(e,a){e.exports=' <div v-show=pending class=loading _v-1921183f=""></div> <dl class=payment-way _v-1921183f=""> <dt class=pay-row :class="{on:quickPay == true}" _v-1921183f=""> <span _v-1921183f="">选择支付方式</span> </dt> <dd _v-1921183f=""> <dl class="pay-item select-box" _v-1921183f=""> <dt class=pay-row _v-1921183f=""> <span _v-1921183f="">平台支付</span> </dt> <dd _v-1921183f=""> <label v-if=!supportwechatpay _v-1921183f=""> <img src=/public/images/payment/pay_zfb.png alt="" _v-1921183f=""> <span _v-1921183f="">支付宝支付</span><input class=checkbox type=radio value=4 v-model=payType _v-1921183f=""> </label> <label v-if=supportwechatpay _v-1921183f=""> <img src=/public/images/payment/pay_wx.png alt="" _v-1921183f=""> <span _v-1921183f="">微信支付</span><input class=checkbox type=radio value=18 v-model=payType _v-1921183f=""> </label> <label _v-1921183f=""> <img src=/public/images/payment/pay_kq.png alt="" _v-1921183f=""> <span _v-1921183f="">快钱支付 <i _v-1921183f="">(网银支付)</i></span><input class=checkbox type=radio value=8 v-model=payType _v-1921183f=""> </label> <label _v-1921183f=""> <img src=/public/images/payment/pay_cft.png alt="" _v-1921183f=""> <span _v-1921183f="">财付通支付</span><input class=checkbox type=radio value=7 v-model=payType _v-1921183f=""> </label> </dd> </dl> <label v-if="quickPay != true" class=pay-row _v-1921183f=""><span _v-1921183f="">货到付款</span><input class=checkbox type=radio value=1 v-model=payType _v-1921183f=""></label> </dd> </dl> <div v-if="quickPay != true" class=pay-submit _v-1921183f=""> <div _v-1921183f="">合计：<strong class=hl _v-1921183f="">￥{{amount}}</strong><span _v-1921183f="">(获得{{will_get_integral}}积分)</span></div> <a class=btn href=javascript:; @click=submit _v-1921183f="">结算</a> </div> <div id=payAction style=display:none _v-1921183f=""></div> '},322:function(e,a){e.exports=' <div class=container _v-d260790a=""> <div v-show=pending class=loading _v-d260790a=""></div> <dl class=order-item style=margin-top:0 _v-d260790a=""> <dt class=order-hd _v-d260790a=""> <span _v-d260790a="">填写地址</span> <i class="font icon-arrow-bottom" _v-d260790a=""></i> </dt> <dd _v-d260790a=""> <a v-if="(typeof defAddress != \'object\') || isLogin == false &amp;&amp; (typeof defAddress != \'object\')" class="address address-none" v-link="{ name: \'addressEdit\', params: {id: 0} }" _v-d260790a=""> <label _v-d260790a=""><i class="font icon-address" _v-d260790a=""></i></label> <div _v-d260790a="">+ 添加地址</div> </a> <div v-else="" class=address _v-d260790a=""> <label class=hl _v-d260790a=""><i class="font icon-address" _v-d260790a=""></i>默认</label> <div _v-d260790a=""> <p _v-d260790a="">收货人：<span _v-d260790a="">{{defAddress.consignee}}</span><span class=fr _v-d260790a="">{{defAddress.mobile}}</span></p> <p _v-d260790a=""><span _v-d260790a="">收货地址：</span><span v-if=defAddress.attribute _v-d260790a="">[{{defAddress.attribute}}]</span><span _v-d260790a="">{{defAddress.province_name}}{{defAddress.city_name}}{{defAddress.district_name}}{{defAddress.town_name}}</span></p> <div class=action _v-d260790a=""> <a v-link="{ name: \'addressEdit\', params: {id: defAddress.address_id} }" _v-d260790a="">修改</a> <a v-if=isLogin v-link="{ name: \'address\', params: {full: true} }" _v-d260790a="">管理地址</a> </div> </div> </div> </dd> </dl> <dl class=order-item _v-d260790a=""> <dt class=order-hd _v-d260790a=""> <span _v-d260790a="">查看商品详情</span> <i class="font icon-arrow-bottom" _v-d260790a=""></i> </dt> <dd _v-d260790a=""> <ul class=goods-list _v-d260790a=""> <li v-for="item in goodsList" _v-d260790a=""> <a class=goods-img v-link="{ name: \'goodsDetail\', params: {id: item.goods_id} }" _v-d260790a=""><img v-lazy=item.goods_thumb alt="" _v-d260790a=""></a> <div class=goods-detail _v-d260790a=""> <p _v-d260790a=""><span class=fl _v-d260790a="">{{item.goods_name}}</span><span _v-d260790a="">￥{{item.goods_price}}</span></p> <p _v-d260790a=""><del _v-d260790a="">￥{{item.market_price}}</del></p> <p _v-d260790a="">x{{item.goods_number}}</p> </div> </li> </ul> </dd> </dl> <dl class=order-item _v-d260790a=""> <dt class=order-hd _v-d260790a=""> <span _v-d260790a="">优惠券</span><em _v-d260790a="">共{{couponsQuantity}}张可用</em> <i class="font icon-arrow-bottom" _v-d260790a=""></i> </dt> <dd _v-d260790a=""> <div class=order-list _v-d260790a=""> <label class=item v-for="item in coupons" @click="couponChange($event, item.type_id)" _v-d260790a=""> <b class=checkbox :class="{selected: item.type_id == couponID}" _v-d260790a=""></b><em _v-d260790a="">{{item.type_name}}</em><span _v-d260790a="">共{{item.count}}张</span> </label> <label class=item @click="couponChange($event, 0)" _v-d260790a=""> <b class=checkbox :class="{selected: couponID == 0}" _v-d260790a=""></b><em _v-d260790a="">不使用优惠券</em> </label> </div> <div class=input-coupon _v-d260790a=""> <div _v-d260790a=""><label _v-d260790a=""><em _v-d260790a="">输入优惠券编码</em><input type=text placeholder=输入优惠券编码 v-model=couponCode _v-d260790a=""></label></div> <a class=btn href=javascript:; @click=applyCoupon _v-d260790a="">确认</a> </div> </dd> </dl> <div class="order-item order-list" _v-d260790a=""> <div class=item _v-d260790a="">商品总计<span _v-d260790a="">￥{{goods_price}}</span></div> <div class=item _v-d260790a="">运费<span _v-d260790a="">￥{{shipping_fee}}</span></div> <div class="item textarea" _v-d260790a="">备注<textarea v-model=remark _v-d260790a=""></textarea></div> </div> <pay v-ref:pay="" :pay-type.sync=payType :amount=amount :supportwechatpay=supportwechatpay :will_get_integral=will_get_integral :remark=remark :token=token _v-d260790a=""></pay> </div> '}});