!function(){var a=!1;!function(b){var c=this||(0,eval)("this"),d=c["document"],e=c["navigator"],f=c["JSON"];!function(a){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var b=module["exports"]||exports;a(b)}else"function"==typeof define&&define["amd"]?define(["exports"],a):a(c["ko"]={})}(function(g){function j(a,b){var c=null===a||typeof a in i;return c?a===b:!1}function k(a,c){var d;return function(){d||(d=setTimeout(function(){d=b,a()},c))}}function l(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function m(a){var b=this;return a&&h.utils.objectForEach(a,function(a,c){var d=h.extenders[a];"function"==typeof d&&(b=d(b,c)||b)}),b}function w(a,b,c,d){h.bindingHandlers[a]={init:function(a,e,f,g,i){var j,k;return h.computed(function(){var m,n,o,l=h.utils.unwrapObservable(e());"function"!=typeof l||l.isKo||(l=l.call(a,{context:i,current:g,bind:f()})),m=!c!=!l,n=!k,o=n||b||m!==j,b&&(a.isKoContext=!0),o&&(n&&h.computedContext.getDependenciesCount()&&(k=h.utils.cloneNodes(h.virtualElements.childNodes(a),!0)),m?(n||h.virtualElements.setDomNodeChildren(a,h.utils.cloneNodes(k)),h.applyBindingsToDescendants(d?d(i,l):i,a)):h.virtualElements.emptyNode(a),j=m)},null,{disposeWhenNodeIsRemoved:a}),{controlsDescendantBindings:!0}}},h.expressionRewriting.bindingRewriteValidators[a]=!1,h.virtualElements.allowedBindings[a]=!0}var i,n,o,p,q,r,s,t,u,v,x,h="undefined"!=typeof g?g:{};h.exportSymbol=function(a,b){var e,c=a.split("."),d=h;for(e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},h.exportProperty=function(a,b,c){a[b]=c},h.version="4.0",h.validValue=function(a,b,c){var d,e,f,g,i,j,k;if(("undefined"==typeof b||null===b)&&(b=""),"number"==typeof b&&(b+=""),"string"==typeof b)if(d=b.replace(/[\s]+/gi,""),""==d&&"undefined"!=typeof c["default"]&&("function"==typeof c["default"]?(e=h.contextFor(a),b=c["default"].call(a,{context:e,current:e.$data,bind:c})):b=c["default"],a.value=b),c.regex&&"string"==typeof b&&b.length>0)f=new RegExp(c.regex,"gi"),ves(a).removeClass("error"),0==f.test(b)&&(ves(a).addClass("error"),c.reger?ves.alert({content:c.reger,type:"notify",style:"error",complete:function(){a.focus()}}):(a.focus(),a.value=b=""));else{if(c.dataType){switch(b+="",g=c.dataType){case"int":b=b.replace(/[^0-9\-\+\s.]+/gi,""),b=""==b?null:parseFloat(b);break;case"bool":b="false"==b||"0"==b||""==d?!1:!0}a.value=null==b?"":b}if(c.compare&&"string"!=typeof b){if(i=c.compare,j=ves("[result]",a.parentNode),j.length>0&&j.html("").css({left:a.offsetLeft+"px",top:"-"+(a.offsetTop+2)+"px"}).removeClass("view"),i.result=null,"undefined"!=typeof i.gt&&i.gtResult)for(0==i.gt instanceof Array&&(i.gt=[i.gt]),0==i.gtResult instanceof Array&&(i.gtResult=[i.gtResult]),k=0;k<i.gt.length;k++)if(b>i.gt[k]){i.result=i.gtResult[k],j.length>0?j.html(i.gtResult[k]).addClass("view"):ves.alert(i.gtResult[k],"notify");break}if("undefined"!=typeof i.lt&&i.ltResult&&null!=b)for(0==i.lt instanceof Array&&(i.lt=[i.lt]),0==i.ltResult instanceof Array&&(i.ltResult=[i.ltResult]),k=0;k<i.lt.length;k++)if(b<i.lt[k]){i.result=i.ltResult[k],j.length>0?j.html(i.ltResult[k]).addClass("view"):ves.alert(i.ltResult[k],"notify");break}}}return"function"==typeof c["update"]&&(e=h.contextFor(a),c["update"].call(a,{context:e,current:e.$data,bind:c})),b},h.exportSymbol("version",h.version),h.utils=function(){function a(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function g(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}function r(a,b){if("input"!==h.utils.tagNameLower(a)||!a.type)return!1;if("click"!=b.toLowerCase())return!1;var c=a.type;return"checkbox"==c||"radio"==c}var n,o,p,q,j={__proto__:[]}instanceof Array,k={},l={},m=e&&/Firefox\/2/i.test(e.userAgent)?"KeyboardEvent":"UIEvents";return k[m]=["keyup","keydown","keypress"],k["MouseEvents"]=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],a(k,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)l[b[c]]=a}),n={propertychange:!0},o=d&&function(){for(var a=3,c=d.createElement("div"),e=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",e[0];);return a>4?a:b}(),p=6===o,q=7===o,{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},arrayIndexOf:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},arrayFirst:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},arrayRemoveItem:function(a,b){var c=h.utils.arrayIndexOf(a,b);c>0?a.splice(c,1):0===c&&a.shift()},arrayGetDistinctValues:function(a){var b,c,d;for(a=a||[],b=[],c=0,d=a.length;d>c;c++)h.utils.arrayIndexOf(b,a[c])<0&&b.push(a[c]);return b},arrayMap:function(a,b){var c,d,e;for(a=a||[],c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},arrayFilter:function(a,b){var c,d,e;for(a=a||[],c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},arrayPushAll:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},addOrRemoveItem:function(a,b,c){var d=h.utils.arrayIndexOf(h.utils.peekObservable(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},canSetPrototype:j,extend:g,setPrototypeOf:i,setPrototypeOfOrExtend:j?i:g,objectForEach:a,objectMap:function(a,b){var c,d;if(!a)return a;c={};for(d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a));return c},emptyDomNode:function(a){for(;a.firstChild;)h.removeNode(a.firstChild)},moveCleanedNodesToContainerElement:function(a){var e,f,b=h.utils.makeArray(a),c=d.createElement("div");for(e=0,f=b.length;f>e;e++)c.appendChild(h.cleanNode(b[e]));return c},cloneNodes:function(a,b){var c,d,e,f;for(c=0,d=a.length,e=[];d>c;c++)f=a[c].cloneNode(!0),e.push(b?h.cleanNode(f):f);return e},setDomNodeChildren:function(a,b){if(h.utils.emptyDomNode(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},replaceDomNodes:function(a,b){var d,e,f,g,c=a.nodeType?[a]:a;if(c.length>0){for(d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)h.removeNode(c[f])}},fixUpContinuousNodeArray:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(a.length>1){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},setOptionNodeSelectionState:function(a,b){7>o?a.setAttribute("selected",b):a.selected=b},stringTrim:function(a){return null===a||a===b?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringTokenize:function(a,b){var e,f,g,c=[],d=(a||"").split(b);for(e=0,f=d.length;f>e;e++)g=h.utils.stringTrim(d[e]),""!==g&&c.push(g);return c},stringStartsWith:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},domNodeIsContainedBy:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},domNodeIsAttachedToDocument:function(a){return h.utils.domNodeIsContainedBy(a,a.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(a){return!!h.utils.arrayFirst(a,h.utils.domNodeIsAttachedToDocument)},tagNameLower:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},registerEventHandler:function(a,b,c){var e,f,d=o&&n[b];if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");e=function(b){c.call(a,b)},f="on"+b,a.attachEvent(f,e),h.utils.domNodeDisposal.addDisposeCallback(a,function(){a.detachEvent(f,e)})}else a.addEventListener(b,c,!1)},triggerEvent:function(a,b){var e,f,g;if(!a||!a.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if(e=r(a,b),"function"==typeof d.createEvent){if("function"!=typeof a.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");f=l[b]||"HTMLEvents",g=d.createEvent(f),g.initEvent(b,!0,!0,c,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(g)}else if(e&&a.click)a.click();else{if("undefined"==typeof a.fireEvent)throw new Error("Browser doesn't support triggering events");a.fireEvent("on"+b)}},unwrapObservable:function(a){return h.isObservable(a)?a():a},peekObservable:function(a){return h.isObservable(a)?a.peek():a},toggleDomNodeCssClass:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];h.utils.arrayForEach(b.match(d),function(a){h.utils.addOrRemoveItem(e,a,c)}),a.className=e.join(" ")}},setTextContent:function(a,c){var e,d=h.utils.unwrapObservable(c);(null===d||d===b)&&(d=""),e=h.virtualElements.firstChild(a),!e||3!=e.nodeType||h.virtualElements.nextSibling(e)?h.virtualElements.setDomNodeChildren(a,[a.ownerDocument.createTextNode(d)]):e.data=d,h.utils.forceRefresh(a)},setElementName:function(a,b){if(a.name=b,7>=o)try{a.mergeAttributes(d.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}},forceRefresh:function(a){if(o>=9){var b=1==a.nodeType?a:a.parentNode;b.style&&(b.style.zoom=b.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(a){if(o){var b=a.style.width;a.style.width=0,a.style.width=b}},range:function(a,b){var c,d;for(a=h.utils.unwrapObservable(a),b=h.utils.unwrapObservable(b),c=[],d=a;b>=d;d++)c.push(d);return c},makeArray:function(a){var c,d,b=[];for(c=0,d=a.length;d>c;c++)b.push(a[c]);return b},isIe6:p,isIe7:q,ieVersion:o,getFormFields:function(a,b){var f,c=h.utils.makeArray(a.getElementsByTagName("input")).concat(h.utils.makeArray(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[];for(f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},parseJson:function(a){return"string"==typeof a&&(a=h.utils.stringTrim(a))?f&&f.parse?f.parse(a):new Function("return "+a)():null},stringifyJson:function(a,b,c){if(!f||!f.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(h.utils.unwrapObservable(a),b,c)},postJson:function(b,c,e){var f,g,i,j,k,l,m,n,o,p;if(e=e||{},f=e["params"]||{},g=e["includeFields"]||this.fieldsIncludedWithJsonPost,i=b,"object"==typeof b&&"form"===h.utils.tagNameLower(b))for(j=b,i=j.action,k=g.length-1;k>=0;k--)for(l=h.utils.getFormFields(j,g[k]),m=l.length-1;m>=0;m--)f[l[m].name]=l[m].value;c=h.utils.unwrapObservable(c),n=d.createElement("form"),n.style.display="none",n.action=i,n.method="post";for(o in c)p=d.createElement("input"),p.name=o,p.value=h.utils.stringifyJson(h.utils.unwrapObservable(c[o])),n.appendChild(p);a(f,function(a,b){var c=d.createElement("input");c.name=a,c.value=b,n.appendChild(c)}),d.body.appendChild(n),e["submitter"]?e["submitter"](n):n.submit(),setTimeout(function(){n.parentNode.removeChild(n)},0)}}}(),h.exportSymbol("utils",h.utils),h.exportSymbol("utils.arrayForEach",h.utils.arrayForEach),h.exportSymbol("utils.arrayFirst",h.utils.arrayFirst),h.exportSymbol("utils.arrayFilter",h.utils.arrayFilter),h.exportSymbol("utils.arrayGetDistinctValues",h.utils.arrayGetDistinctValues),h.exportSymbol("utils.arrayIndexOf",h.utils.arrayIndexOf),h.exportSymbol("utils.arrayMap",h.utils.arrayMap),h.exportSymbol("utils.arrayPushAll",h.utils.arrayPushAll),h.exportSymbol("utils.arrayRemoveItem",h.utils.arrayRemoveItem),h.exportSymbol("utils.extend",h.utils.extend),h.exportSymbol("utils.fieldsIncludedWithJsonPost",h.utils.fieldsIncludedWithJsonPost),h.exportSymbol("utils.getFormFields",h.utils.getFormFields),h.exportSymbol("utils.peekObservable",h.utils.peekObservable),h.exportSymbol("utils.postJson",h.utils.postJson),h.exportSymbol("utils.parseJson",h.utils.parseJson),h.exportSymbol("utils.registerEventHandler",h.utils.registerEventHandler),h.exportSymbol("utils.stringifyJson",h.utils.stringifyJson),h.exportSymbol("utils.range",h.utils.range),h.exportSymbol("utils.toggleDomNodeCssClass",h.utils.toggleDomNodeCssClass),h.exportSymbol("utils.triggerEvent",h.utils.triggerEvent),h.exportSymbol("utils.unwrapObservable",h.utils.unwrapObservable),h.exportSymbol("utils.objectForEach",h.utils.objectForEach),h.exportSymbol("utils.addOrRemoveItem",h.utils.addOrRemoveItem),h.exportSymbol("unwrap",h.utils.unwrapObservable),Function.prototype["bind"]||(Function.prototype["bind"]=function(a){var b=this,c=Array.prototype.slice.call(arguments),a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),h.utils.domData=new function(){function e(e,f){var g=e[c],h=g&&"null"!==g&&d[g];if(!h){if(!f)return b;g=e[c]="ko"+a++,d[g]={}}return d[g]}var a=0,c="koID",d={};return{get:function(a,c){var d=e(a,!1);return d===b?b:d[c]},set:function(a,c,d){if(d!==b||e(a,!1)!==b){var f=e(a,!0);f[c]=d}},clear:function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1},nextKey:function(){return a++ +c}}},h.exportSymbol("utils.domData",h.utils.domData),h.exportSymbol("utils.domData.clear",h.utils.domData.clear),h.utils.domNodeDisposal=new function(){function e(c,d){var e=h.utils.domData.get(c,a);return e===b&&d&&(e=[],h.utils.domData.set(c,a,e)),e}function f(c){h.utils.domData.set(c,a,b)}function g(a){var c,b=e(a,!1);if(b)for(b=b.slice(0),c=0;c<b.length;c++)b[c](a);h.utils.domData.clear(a),h.utils.domNodeDisposal["cleanExternalData"](a),d[a.nodeType]&&i(a)}function i(a){for(var b,c=a.firstChild;b=c;)c=b.nextSibling,8===b.nodeType&&g(b)}var a=h.utils.domData.nextKey(),c={1:!0,8:!0,9:!0},d={1:!0,9:!0};return{addDisposeCallback:function(a,b){if("function"!=typeof b)throw new Error("Callback must be a function");e(a,!0).push(b)},removeDisposeCallback:function(a,b){var c=e(a,!1);c&&(h.utils.arrayRemoveItem(c,b),0==c.length&&f(a))},cleanNode:function(a){var b,e,f;if(c[a.nodeType]&&(g(a),d[a.nodeType]))for(b=[],h.utils.arrayPushAll(b,a.getElementsByTagName("*")),e=0,f=b.length;f>e;e++)g(b[e]);return a},removeNode:function(a){h.cleanNode(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(){}}},h.cleanNode=h.utils.domNodeDisposal.cleanNode,h.removeNode=h.utils.domNodeDisposal.removeNode,h.exportSymbol("cleanNode",h.cleanNode),h.exportSymbol("removeNode",h.removeNode),h.exportSymbol("utils.domNodeDisposal",h.utils.domNodeDisposal),h.exportSymbol("utils.domNodeDisposal.addDisposeCallback",h.utils.domNodeDisposal.addDisposeCallback),h.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",h.utils.domNodeDisposal.removeDisposeCallback),function(){function e(a){var b=h.utils.stringTrim(a).toLowerCase(),e=d.createElement("div"),f=b.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!b.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!b.indexOf("<td")||!b.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],g="ignored<div>"+f[1]+a+f[2]+"</div>";for("function"==typeof c["innerShiv"]?e.appendChild(c["innerShiv"](g)):e.innerHTML=g;f[0]--;)e=e.lastChild;return h.utils.makeArray(e.lastChild.childNodes)}h.utils.parseHtmlFragment=function(a){return e(a)},h.utils.setHtml=function(a,c){var d,e;if(h.utils.emptyDomNode(a),c=h.utils.unwrapObservable(c),null!==c&&c!==b)for("string"!=typeof c&&(c=c.toString()),d=h.utils.parseHtmlFragment(c),e=0;e<d.length;e++)a.appendChild(d[e])}}(),h.exportSymbol("utils.parseHtmlFragment",h.utils.parseHtmlFragment),h.exportSymbol("utils.setHtml",h.utils.setHtml),h.memoization=function(){function c(){return(0|4294967296*(1+Math.random())).toString(16).substring(1)}function d(){return c()+c()}function e(a,b){var c,d,f,g;if(a)if(8==a.nodeType)c=h.memoization.parseMemoText(a.nodeValue),null!=c&&b.push({domNode:a,memoId:c});else if(1==a.nodeType)for(d=0,f=a.childNodes,g=f.length;g>d;d++)e(f[d],b)}var a={};return{memoize:function(b){if("function"!=typeof b)throw new Error("You can only pass a function to ko.memoization.memoize()");var c=d();return a[c]=b,"<!--[ko_memo:"+c+"]-->"},unmemoize:function(c,d){var e=a[c];if(e===b)throw new Error("Couldn't find any memo with ID "+c+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete a[c]}},unmemoizeDomNodeAndDescendants:function(a,b){var d,f,g,i,c=[];for(e(a,c),d=0,f=c.length;f>d;d++)g=c[d].domNode,i=[g],b&&h.utils.arrayPushAll(i,b),h.memoization.unmemoize(c[d].memoId,i),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)},parseMemoText:function(a){var b=a.match(/^\[ko_memo\:(.*?)\]$/);return b?b[1]:null}}}(),h.exportSymbol("memoization",h.memoization),h.exportSymbol("memoization.memoize",h.memoization.memoize),h.exportSymbol("memoization.unmemoize",h.memoization.unmemoize),h.exportSymbol("memoization.parseMemoText",h.memoization.parseMemoText),h.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",h.memoization.unmemoizeDomNodeAndDescendants),h.extenders={throttle:function(a,b){a["throttleEvaluation"]=b;var c=null;return h.dependentObservable({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b["timeout"],d=b["method"]),e="notifyWhenChangesStop"==d?l:k,a.limit(function(a){return e(a,c)})},notify:function(a,b){a["equalityComparer"]="always"==b?null:j}},i={undefined:1,"boolean":1,number:1,string:1},h.exportSymbol("extenders",h.extenders),h.subscription=function(a,b,c){this.target=a,this.callback=b,this.disposeCallback=c,this.isDisposed=!1,h.exportProperty(this,"dispose",this.dispose)},h.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},h.subscribable=function(){h.utils.setPrototypeOfOrExtend(this,h.subscribable["fn"]),this._subscriptions={}},n="change",o={subscribe:function(a,b,c){var e,f,d=this;return c=c||n,e=b?a.bind(b):a,f=new h.subscription(d,e,function(){h.utils.arrayRemoveItem(d._subscriptions[c],f)}),d.peek&&d.peek(),d._subscriptions[c]||(d._subscriptions[c]=[]),d._subscriptions[c].push(f),f},notifySubscribers:function(a,b){if(b=b||n,this.hasSubscriptionsForEvent(b))try{h.dependencyDetection.begin();for(var e,c=this._subscriptions[b].slice(0),d=0;e=c[d];++d)e.isDisposed||e.callback(a)}finally{h.dependencyDetection.end()}},limit:function(a){var d,e,f,i,b=this,c=h.isObservable(b),g="beforeChange";b._origNotifySubscribers||(b._origNotifySubscribers=b["notifySubscribers"],b["notifySubscribers"]=function(a,c){c&&c!==n?c===g?b._rateLimitedBeforeChange(a):b._origNotifySubscribers(a,c):b._rateLimitedChange(a)}),i=a(function(){c&&f===b&&(f=b()),d=!1,b.isDifferent(e,f)&&b._origNotifySubscribers(e=f)}),b._rateLimitedChange=function(a){d=!0,f=a,i()},b._rateLimitedBeforeChange=function(a){d||(e=a,b._origNotifySubscribers(a,g))}},hasSubscriptionsForEvent:function(a){return this._subscriptions[a]&&this._subscriptions[a].length},getSubscriptionsCount:function(){var a=0;return h.utils.objectForEach(this._subscriptions,function(b,c){a+=c.length}),a},isDifferent:function(a,b){return!this["equalityComparer"]||!this["equalityComparer"](a,b)},extend:m},h.exportProperty(o,"subscribe",o.subscribe),h.exportProperty(o,"extend",o.extend),h.exportProperty(o,"getSubscriptionsCount",o.getSubscriptionsCount),h.utils.canSetPrototype&&h.utils.setPrototypeOf(o,Function.prototype),h.subscribable["fn"]=o,h.isSubscribable=function(a){return null!=a&&"function"==typeof a.subscribe&&"function"==typeof a["notifySubscribers"]},h.exportSymbol("subscribable",h.subscribable),h.exportSymbol("isSubscribable",h.isSubscribable),h.computedContext=h.dependencyDetection=function(){function d(){return++c}function e(c){a.push(b),b=c}function f(){b=a.pop()}var b,a=[],c=0;return{begin:e,end:f,registerDependency:function(a){if(b){if(!h.isSubscribable(a))throw new Error("Only subscribable things can act as dependencies");b.callback(a,a._id||(a._id=d()))}},ignore:function(a,b,c){try{return e(),a.apply(b,c||[])}finally{f()}},getDependenciesCount:function(){return b?b.computed.getDependenciesCount():void 0},isInitial:function(){return b?b.isInitial:void 0}}}(),h.exportSymbol("computedContext",h.computedContext),h.exportSymbol("computedContext.getDependenciesCount",h.computedContext.getDependenciesCount),h.exportSymbol("computedContext.isInitial",h.computedContext.isInitial),h.observable=function(a){function c(){return arguments.length>0?(c.valueWillMutate(),c.oldValue=b,b=arguments[0],c.currentValue=b,c.valueHasMutated(),this):(h.dependencyDetection.registerDependency(c),b)}var b=a;return c.isKo=!0,h.subscribable.call(c),h.utils.setPrototypeOfOrExtend(c,h.observable["fn"]),c.peek=function(){return b},c.valueHasMutated=function(){c["notifySubscribers"](b),b instanceof Array&&(c.count=b.length)},c.valueWillMutate=function(){c["notifySubscribers"](b,"beforeChange")},h.exportProperty(c,"peek",c.peek),h.exportProperty(c,"valueHasMutated",c.valueHasMutated),h.exportProperty(c,"valueWillMutate",c.valueWillMutate),c},h.observable["fn"]={equalityComparer:j},p=h.observable.protoProperty="__ko_proto__",h.observable["fn"][p]=h.observable,h.utils.canSetPrototype&&h.utils.setPrototypeOf(h.observable["fn"],h.subscribable["fn"]),h.hasPrototype=function(a,c){return null===a||a===b||a[p]===b?!1:a[p]===c?!0:h.hasPrototype(a[p],c)},h.isObservable=function(a){return h.hasPrototype(a,h.observable)},h.isWriteableObservable=function(a){return"function"==typeof a&&a[p]===h.observable?!0:"function"==typeof a&&a[p]===h.dependentObservable&&a.hasWriteFunction?!0:!1},h.exportSymbol("observable",h.observable),h.exportSymbol("isObservable",h.isObservable),h.exportSymbol("isWriteableObservable",h.isWriteableObservable),h.observableArray=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var b=h.observable(a);return h.utils.setPrototypeOfOrExtend(b,h.observableArray["fn"]),b.extend({trackArrayChanges:!0})},h.observableArray["fn"]={remove:function(a){var e,f,b=this.peek(),c=[],d="function"!=typeof a||h.isObservable(a)?function(b){return b===a}:a;for(e=0;e<b.length;e++)f=b[e],d(f)&&(0===c.length&&this.valueWillMutate(),c.push(f),b.splice(e,1),e--);return c.length&&this.valueHasMutated(),c},removeAll:function(a){var c,d;return a===b?(c=this.peek(),d=c.slice(0),this.valueWillMutate(),c.splice(0,c.length),this.valueHasMutated(),d):a?this["remove"](function(b){return h.utils.arrayIndexOf(a,b)>=0}):[]},destroy:function(a){var d,e,b=this.peek(),c="function"!=typeof a||h.isObservable(a)?function(b){return b===a}:a;for(this.valueWillMutate(),d=b.length-1;d>=0;d--)e=b[d],c(e)&&(b[d]["_destroy"]=!0);this.valueHasMutated()},destroyAll:function(a){return a===b?this["destroy"](function(){return!0}):a?this["destroy"](function(b){return h.utils.arrayIndexOf(a,b)>=0}):[]},indexOf:function(a){var b=this();return h.utils.arrayIndexOf(b,a)},replace:function(a,b){var c=this["indexOf"](a);c>=0&&(this.valueWillMutate(),this.peek()[c]=b,this.valueHasMutated())}},h.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(a){h.observableArray["fn"][a]=function(){var c,b=this.peek();return this.valueWillMutate(),this.cacheDiffForKnownOperation(b,a,arguments),c=b[a].apply(b,arguments),this.valueHasMutated(),c}}),h.utils.arrayForEach(["slice"],function(a){h.observableArray["fn"][a]=function(){var b=this();return b[a].apply(b,arguments)}}),h.utils.canSetPrototype&&h.utils.setPrototypeOf(h.observableArray["fn"],h.observable["fn"]),h.exportSymbol("observableArray",h.observableArray),q="arrayChange",h.extenders["trackArrayChanges"]=function(a){function f(){var e,f;b||(b=!0,e=a["notifySubscribers"],a["notifySubscribers"]=function(a,b){return b&&b!==n||++d,e.apply(this,arguments)},f=[].concat(a.peek()||[]),c=null,a.subscribe(function(b){if(b=[].concat(b||[]),a.hasSubscriptionsForEvent(q)){var e=g(f,b);e.length&&a["notifySubscribers"](e,q)}f=b,c=null,d=0}))}function g(a,b){return(!c||d>1)&&(c=h.utils.compareArrays(a,b,{sparse:!0})),c}if(!a.cacheDiffForKnownOperation){var b=!1,c=null,d=0,e=a.subscribe;a.subscribe=a["subscribe"]=function(a,b,c){return c===q&&f(),e.apply(this,arguments)},a.cacheDiffForKnownOperation=function(a,e,f){function l(a,b,c){return g[g.length]={status:a,value:b,index:c}}var g,i,j,k,m,n,o,p,q,r,s,t;if(b&&!d){switch(g=[],i=a.length,j=f.length,k=0,e){case"push":k=i;case"unshift":for(m=0;j>m;m++)l("added",f[m],k+m);break;case"pop":k=i-1;case"shift":i&&l("deleted",a[k],k);break;case"splice":for(n=Math.min(Math.max(0,f[0]<0?i+f[0]:f[0]),i),o=1===j?i:Math.min(n+(f[1]||0),i),p=n+j-2,q=Math.max(o,p),r=[],s=[],m=n,t=2;q>m;++m,++t)o>m&&s.push(l("deleted",a[m],m)),p>m&&r.push(l("added",f[t],m));h.utils.findMovesInArrayComparison(s,r);break;default:return}c=g}}}},h.computed=h.dependentObservable=function(b,c,d){function l(a,b){x[b]||(x[b]=a.subscribe(n),++y)}function m(){j=!0,h.utils.objectForEach(x,function(a,b){b.dispose()}),x={},y=0,f=!1}function n(){var a=p["throttleEvaluation"];a&&a>=0?(clearTimeout(z),z=setTimeout(o,a)):p._evalRateLimited?p._evalRateLimited():o()}function o(){var b,d,m;if(!g&&!j){if(v&&v()){if(!i)return w(),void 0}else i=!1;g=!0;try{b=x,d=y,h.dependencyDetection.begin({callback:function(a,c){j||(d&&b[c]?(x[c]=b[c],++y,delete b[c],--d):l(a,c))},computed:p,isInitial:!y}),x={},y=0;try{m=c?k.call(c):k()}finally{h.dependencyDetection.end(),d&&h.utils.objectForEach(b,function(a,b){b.dispose()}),f=!1}p.isDifferent(e,m)&&(p["notifySubscribers"](e,"beforeChange"),e=m,a&&(p._latestValue=e),(!p._evalRateLimited||p["throttleEvaluation"])&&p["notifySubscribers"](e))}finally{g=!1}y||w()}}function p(){if(arguments.length>0){if("function"!=typeof s)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return s.apply(c,arguments),this}return f&&o(),h.dependencyDetection.registerDependency(p),e}function q(){return f&&!y&&o(),e}function r(){return f||y>0}var e,s,t,u,v,w,x,y,z,A,f=!0,g=!1,i=!1,j=!1,k=b;if(k&&"object"==typeof k?(d=k,k=d["read"]):(d=d||{},k||(k=d["read"])),"function"!=typeof k)throw new Error("Pass a function that returns the value of the ko.computed");return s=d["write"],t=d["disposeWhenNodeIsRemoved"]||d.disposeWhenNodeIsRemoved||null,u=d["disposeWhen"]||d.disposeWhen,v=u,w=m,x={},y=0,z=null,c||(c=d["owner"]),h.subscribable.call(p),h.utils.setPrototypeOfOrExtend(p,h.dependentObservable["fn"]),p.peek=q,p.getDependenciesCount=function(){return y},p.hasWriteFunction="function"==typeof d["write"],p.dispose=function(){w()},p.isActive=r,A=p.limit,p.limit=function(a){A.call(p,a),p._evalRateLimited=function(){p._rateLimitedBeforeChange(e),f=!0,p._rateLimitedChange(p)}},h.exportProperty(p,"peek",p.peek),h.exportProperty(p,"dispose",p.dispose),h.exportProperty(p,"isActive",p.isActive),h.exportProperty(p,"getDependenciesCount",p.getDependenciesCount),t&&(i=!0,t.nodeType&&(v=function(){return!h.utils.domNodeIsAttachedToDocument(t)||u&&u()})),d["deferEvaluation"]!==!0&&o(),t&&r()&&t.nodeType&&(w=function(){h.utils.domNodeDisposal.removeDisposeCallback(t,w),m()},h.utils.domNodeDisposal.addDisposeCallback(t,w)),p},h.isComputed=function(a){return h.hasPrototype(a,h.dependentObservable)},r=h.observable.protoProperty,h.dependentObservable[r]=h.observable,h.dependentObservable["fn"]={equalityComparer:j},h.dependentObservable["fn"][r]=h.dependentObservable,h.utils.canSetPrototype&&h.utils.setPrototypeOf(h.dependentObservable["fn"],h.subscribable["fn"]),h.exportSymbol("dependentObservable",h.dependentObservable),h.exportSymbol("computed",h.dependentObservable),h.exportSymbol("isComputed",h.isComputed),function(){function c(a,f,g){var h,i;return g=g||new e,a=f(a),(h=!("object"!=typeof a||null===a||a===b||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean))?(i=a instanceof Array?[]:{},g.save(a,i),d(a,function(d){var h,e=f(a[d]);switch(typeof e){case"boolean":case"number":case"string":case"function":i[d]=e;break;case"object":case"undefined":h=g.get(e),i[d]=h!==b?h:c(e,f,g)}}),i):a}function d(a,b){var c,d;if(a instanceof Array){for(c=0;c<a.length;c++)b(c);"function"==typeof a["toJSON"]&&b("toJSON")}else for(d in a)b(d)}function e(){this.keys=[],this.values=[]}var a=10;h.toJS=function(b){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return c(b,function(b){for(var c=0;h.isObservable(b)&&a>c;c++)b=b();return b})},h.toJSON=function(a,b,c){var d=h.toJS(a);return h.utils.stringifyJson(d,b,c)},e.prototype={constructor:e,save:function(a,b){var c=h.utils.arrayIndexOf(this.keys,a);c>=0?this.values[c]=b:(this.keys.push(a),this.values.push(b))},get:function(a){var c=h.utils.arrayIndexOf(this.keys,a);return c>=0?this.values[c]:b}}}(),h.exportSymbol("toJS",h.toJS),h.exportSymbol("toJSON",h.toJSON),function(){var a="__ko__hasDomDataOptionValue__";h.selectExtensions={readValue:function(c){switch(h.utils.tagNameLower(c)){case"option":return c[a]===!0?h.utils.domData.get(c,h.bindingHandlers.options.optionValueDomDataKey):c.value||c.text;case"select":return c.selectedIndex>=0?h.selectExtensions.readValue(c.options[c.selectedIndex]):b;default:return c.value}},writeValue:function(c,d,e){var f,j,g,i;switch(h.utils.tagNameLower(c)){case"option":switch(typeof d){case"string":h.utils.domData.set(c,h.bindingHandlers.options.optionValueDomDataKey,b),a in c&&delete c[a],c.value=d;break;default:h.utils.domData.set(c,h.bindingHandlers.options.optionValueDomDataKey,d),c[a]=!0,c.value="number"==typeof d?d:""}break;case"select":for((""===d||null===d)&&(d=b),f=-1,g=0,i=c.options.length;i>g;++g)if(j=h.selectExtensions.readValue(c.options[g]),j==d||""==j&&d===b){f=g;break}(e||f>=0||d===b&&c.size>1)&&(c.selectedIndex=f);break;default:(null===d||d===b)&&(d=""),c.value=d}}}}(),h.exportSymbol("selectExtensions",h.selectExtensions),h.exportSymbol("selectExtensions.readValue",h.selectExtensions.readValue),h.exportSymbol("selectExtensions.writeValue",h.selectExtensions.writeValue),h.expressionRewriting=function(){function c(c){if(h.utils.arrayIndexOf(a,c)>=0)return!1;var d=c.match(b);return null===d?!1:c}function n(a){var e,f,c,d,g,j,i,n,o,b=h.utils.stringTrim(a);if(123===b.charCodeAt(0)&&(b=b.slice(1,-1)),c=[],d=b.match(k),g=0,d)for(d.push(","),i=0;j=d[i];++i){if(n=j.charCodeAt(0),44===n){if(0>=g){e&&c.push(f?{key:e,value:f.join("")}:{unknown:e}),e=f=g=0;continue}}else if(58===n){if(!f)continue}else if(47===n&&i&&j.length>1)o=d[i-1].match(l),o&&!m[o[0]]&&(b=b.substr(b.indexOf(j)+1),d=b.match(k),d.push(","),i=-1,j="/");else if(40===n||123===n||91===n)++g;else if(41===n||125===n||93===n)--g;else if(!e&&!f){e=34===n||39===n?j.slice(1,-1):j;continue}f?f.push(j):f=[j]}return c}function p(a,b){function d(a,b){function j(c){return c&&c["preprocess"]?b=c["preprocess"](b,a,d):!0}var i,k,l,m;j(h["getBindingHandler"](a))&&(o[a]&&(i=c(b))&&f.push("'"+a+"':function(_z){"+i+"=_z}"),g&&("string"==typeof i&&"$data"!=i?(k=i.replace(/[\$\[\]0-9a-z_.]/gi,""),0==k.length?(m=i.indexOf("$")>-1?"":"$data.",l="with"==a?"ko.observable()":"foreach"==a?"ko.observableArray()":'""',i="if(typeof("+i+')=="undefined")'+m+i+"="+l+";"):i=""):i="",b="function(){"+i+"try{return "+b+" }catch(e){}}"),e.push("'"+a+"':"+b))}b=b||{};var e=[],f=[],g=b["valueAccessors"],i="string"==typeof a?n(a):a;return h.utils.arrayForEach(i,function(a){d(a.key||a["unknown"],a.value)}),f.length&&d("_ko_property_writers","{"+f.join(",")+" }"),e.join(",")}var a=["true","false","null","undefined"],b=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d='"(?:[^"\\\\]|\\\\.)*"',e="'(?:[^'\\\\]|\\\\.)*'",f="/(?:[^/\\\\]|\\\\.)*/w*",g=",\"'{}()/:[\\]",i="[^\\s:,/][^"+g+"]*[^\\s"+g+"]",j="[^\\s]",k=RegExp(d+"|"+e+"|"+f+"|"+i+"|"+j,"g"),l=/[\])"'A-Za-z0-9_$]+$/,m={"in":1,"return":1,"typeof":1},o={foreach:!0,"with":!0,text:!0,value:!0,html:!0,options:!0,checked:!0};return{bindingRewriteValidators:[],twoWayBindings:o,parseObjectLiteral:n,preProcessBindings:p,keyValueArrayContainsKey:function(a,b){for(var c=0;c<a.length;c++)if(a[c]["key"]==b)return!0;return!1},writeValueToProperty:function(a,b,c,d,e,f){if(d=h.validValue(f,d,b()),a&&h.isObservable(a))!h.isWriteableObservable(a)||e&&a.peek()===d||a(d);else{var g=b.get("_ko_property_writers");g&&g[c]&&g[c](d)}}}}(),h.exportSymbol("expressionRewriting",h.expressionRewriting),h.exportSymbol("expressionRewriting.bindingRewriteValidators",h.expressionRewriting.bindingRewriteValidators),h.exportSymbol("expressionRewriting.parseObjectLiteral",h.expressionRewriting.parseObjectLiteral),h.exportSymbol("expressionRewriting.preProcessBindings",h.expressionRewriting.preProcessBindings),h.exportSymbol("expressionRewriting._twoWayBindings",h.expressionRewriting.twoWayBindings),h.exportSymbol("jsonExpressionRewriting",h.expressionRewriting),h.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",h.expressionRewriting.preProcessBindings),function(){function i(c){var d=h.min?e:b;return 8==c.nodeType&&d.test(a?c.text:c.nodeValue)}function j(b){var d=h.min?f:c;return 8==b.nodeType&&d.test(a?b.text:b.nodeValue)}function k(a,b){for(var c=a,d=1,e=[];c=c.nextSibling;){if(j(c)&&(d--,0===d))return e;e.push(c),i(c)&&d++}if(!b)throw new Error("Cannot find closing comment tag to match: "+a.nodeValue);return null}function l(a,b){var c=k(a,b);return c?c.length>0?c[c.length-1].nextSibling:a.nextSibling:null}function m(a){var d,b=a.firstChild,c=null;if(b)do c?c.push(b):i(b)?(d=l(b,!0),d?b=d:c=[b]):j(b)&&(c=[b]);while(b=b.nextSibling);return c}var a=d&&"<!--test-->"===d.createComment("test").text,b=a?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,c=a?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,e=a?/^<!--\s*k(?:\s+([\s\S]+))?\s*-->$/:/^\s*k(?:\s+([\s\S]+))?\s*$/,f=a?/^<!--\s*\/k\s*-->$/:/^\s*\/k\s*$/,g={ul:!0,ol:!0};h.virtualElements={allowedBindings:{},childNodes:function(a){return i(a)?k(a):a.childNodes},emptyNode:function(a){var b,c,d;if(i(a))for(b=h.virtualElements.childNodes(a),c=0,d=b.length;d>c;c++)h.removeNode(b[c]);else h.utils.emptyDomNode(a)},setDomNodeChildren:function(a,b){var c,d,e;if(i(a))for(h.virtualElements.emptyNode(a),c=a.nextSibling,d=0,e=b.length;e>d;d++)c.parentNode.insertBefore(b[d],c);else h.utils.setDomNodeChildren(a,b)},prepend:function(a,b){i(a)?a.parentNode.insertBefore(b,a.nextSibling):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},insertAfter:function(a,b,c){c?i(a)?a.parentNode.insertBefore(b,c.nextSibling):c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):h.virtualElements.prepend(a,b)},firstChild:function(a){return i(a)?!a.nextSibling||j(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){return i(a)&&(a=l(a)),a.nextSibling&&j(a.nextSibling)?null:a.nextSibling},hasBindingValue:i,virtualNodeBindingValue:function(c){var d=(a?c.text:c.nodeValue).match(h.min?e:b);return d?d[1]:null},normaliseVirtualElementDomStructure:function(a){var b,c,d,e;if(g[h.utils.tagNameLower(a)]&&(b=a.firstChild))do if(1===b.nodeType&&(c=m(b)))for(d=b.nextSibling,e=0;e<c.length;e++)d?a.insertBefore(c[e],d):a.appendChild(c[e]);while(b=b.nextSibling)}}}(),h.exportSymbol("virtualElements",h.virtualElements),h.exportSymbol("virtualElements.allowedBindings",h.virtualElements.allowedBindings),h.exportSymbol("virtualElements.emptyNode",h.virtualElements.emptyNode),h.exportSymbol("virtualElements.insertAfter",h.virtualElements.insertAfter),h.exportSymbol("virtualElements.prepend",h.virtualElements.prepend),h.exportSymbol("virtualElements.setDomNodeChildren",h.virtualElements.setDomNodeChildren),function(){function a(a,c,d,e){var f=a+(d&&d["valueAccessors"]||"");return c[f]||(c[f]=b(a,d,e))}function b(a,b){var d=h.expressionRewriting.preProcessBindings(a,b),e="with($element){with($context){with($data||{}){return{"+d+"}}}}";return new Function("$context","$element",e)}h.bindingProvider=function(){this.bindingCache={}},h.utils.extend(h.bindingProvider.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return h.min?null!=a.getAttribute("bind"):null!=a.getAttribute("data-bind");case 8:return h.virtualElements.hasBindingValue(a);default:return!1}},getBindings:function(a,b){var c=this["getBindingsString"](a,b);return c?this["parseBindingsString"](c,b,a):null},getBindingAccessors:function(a,b){var c=this["getBindingsString"](a,b);return c?this["parseBindingsString"](c,b,a,{valueAccessors:!0}):null},getBindingsString:function(a){switch(a.nodeType){case 1:return h.min?a.getAttribute("bind"):a.getAttribute("data-bind");case 8:return h.virtualElements.virtualNodeBindingValue(a);default:return null}},parseBindingsString:function(b,c,d,e){try{var f=a(b,this.bindingCache,e,d);return f(c,d)}catch(g){throw g.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+g.message,g}}}),h.bindingProvider["instance"]=new h.bindingProvider}(),h.exportSymbol("bindingProvider",h.bindingProvider),function(){function c(a){return function(){return a}}function d(a){return a()}function e(a){return h.utils.objectMap(h.dependencyDetection.ignore(a),function(b,c){return function(){return a()[c]}})}function f(a,b,d){return"function"==typeof a?e(a.bind(null,b,d)):h.utils.objectMap(a,c)}function g(a,b){return e(this["getBindings"].bind(this,a,b))}function i(a){var b=h.virtualElements.allowedBindings[a];if(!b)throw new Error("The binding '"+a+"' cannot be used with virtual elements")}function j(a,b,c){var e,f=h.virtualElements.firstChild(b),g=h.bindingProvider["instance"],i=g["preprocessNode"];if(i){for(;e=f;)f=h.virtualElements.nextSibling(e),i.call(g,e);f=h.virtualElements.firstChild(b)}for(;e=f;)f=h.virtualElements.nextSibling(e),k(a,e,c)}function k(b,c,d){var g,e=!0,f=1===c.nodeType;f&&h.virtualElements.normaliseVirtualElementDomStructure(c),g=f&&d||h.bindingProvider["instance"]["nodeHasBindings"](c),g&&(e=n(c,null,b,d)["shouldBindDescendants"]),e&&!a[h.utils.tagNameLower(c)]&&j(b,c,!f)}function m(a){var b=[],c={},d=[];return h.utils.objectForEach(a,function e(f){if(!c[f]){var g=h["getBindingHandler"](f);g&&(g["after"]&&(d.push(f),h.utils.arrayForEach(g["after"],function(b){if(a[b]){if(-1!==h.utils.arrayIndexOf(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,handler:g})),c[f]=!0}}),b}function n(a,c,e,f){function s(){return h.utils.objectMap(p?p():k,d)}var k,n,o,p,q,r,t,j=h.utils.domData.get(a,l);return c||h.utils.domData.set(a,l,!0),!j&&f&&h.storedBindingContextForNode(a,e),c&&"function"!=typeof c?k=c:(n=h.bindingProvider["instance"],o=n["getBindingAccessors"]||g,p=h.dependentObservable(function(){return k=c?c(e,a):o.call(n,a,e),k&&e._subscribable&&e._subscribable(),k},null,{disposeWhenNodeIsRemoved:a}),k&&p.isActive()||(p=null)),k&&(r=p?function(a){return function(){return d(p()[a])}}:function(a){return k[a]},s["get"]=function(a){return k[a]&&d(r(a))},s["has"]=function(a){return a in k},t=m(k),h.utils.arrayForEach(t,function(c){var d=c.handler["init"],f=c.handler["update"],g=c.key;8===a.nodeType&&i(g);try{"function"==typeof d&&h.dependencyDetection.ignore(function(){a.bind=s();var c=d(a,r(g),s,e["$data"],e);if(c&&c["controlsDescendantBindings"]){if(q!==b)throw new Error("Multiple bindings ("+q+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");q=g}}),"function"==typeof f&&h.dependentObservable(function(){f(a,r(g),s,e["$data"],e)},null,{disposeWhenNodeIsRemoved:a})}catch(j){throw j.message='Unable to process binding "'+g+": "+k[g]+'"\nMessage: '+j.message,j}})),{shouldBindDescendants:q===b}}function p(a){return a&&a instanceof h.bindingContext?a:new h.bindingContext(a)}var a,l,o;h.handler=h.bindingHandlers={},h.extend=function(a){if("object"==typeof a)for(var b in a)h.handler[b]||(h.handler[b]=a[b])},a={script:!0},h["getBindingHandler"]=function(a){return h.bindingHandlers[a]},h.bindingContext=function(a,c,d,e){function f(){var b=j?a():a,f=h.utils.unwrapObservable(b);return c?(c._subscribable&&c._subscribable(),h.utils.extend(i,c),l&&(i._subscribable=l)):(i["$parents"]=[],i["$root"]=f,i["ko"]=h),i["$rawData"]=b,i["$data"]=f,d&&(i[d]=f),e&&e(i,c,f),i["$data"]}function g(){return k&&!h.utils.anyDomNodeIsAttachedToDocument(k)}var k,i=this,j="function"==typeof a&&!h.isObservable(a),l=h.dependentObservable(f,null,{disposeWhen:g,disposeWhenNodeIsRemoved:!0});l.isActive()&&(i._subscribable=l,l["equalityComparer"]=null,k=[],l._addNode=function(a){k.push(a),h.utils.domNodeDisposal.addDisposeCallback(a,function(a){h.utils.arrayRemoveItem(k,a),k.length||(l.dispose(),i._subscribable=l=b)})})},h.bindingContext.prototype["createChildContext"]=function(a,b,c){return new h.bindingContext(a,this,b,function(a,b){a["$parentContext"]=b,a["$parent"]=b["$data"],a["$parents"]=(b["$parents"]||[]).slice(0),a["$parents"].unshift(a["$parent"]),c&&c(a)})},h.bindingContext.prototype["extend"]=function(a){return new h.bindingContext(this._subscribable||this["$data"],this,null,function(b,c){b["$rawData"]=c["$rawData"],h.utils.extend(b,"function"==typeof a?a():a)})},l=h.utils.domData.nextKey(),o=h.utils.domData.nextKey(),h.storedBindingContextForNode=function(a,b){return 2!=arguments.length?h.utils.domData.get(a,o):(h.utils.domData.set(a,o,b),b._subscribable&&b._subscribable._addNode(a),void 0)},h.applyBindingAccessorsToNode=function(a,b,c){return 1===a.nodeType&&h.virtualElements.normaliseVirtualElementDomStructure(a),n(a,b,p(c),!0)},h.applyBindingsToNode=function(a,b,c){var d=p(c);return h.applyBindingAccessorsToNode(a,f(b,d,a),d)},h.applyBindingsToDescendants=function(a,b){(1===b.nodeType||8===b.nodeType)&&j(p(a),b,!0)},h.applyBindings=function(a,b){return a=a||{},b=b||ves.html[0],k(p(a),b,!0),a},h.contextFor=function(a){switch(a.nodeType){case 1:case 8:var c=h.storedBindingContextForNode(a);if(c)return c;if(a.parentNode)return h.contextFor(a.parentNode)}return b},h.dataFor=function(a){var c=h.contextFor(a);return c?c["$data"]:b},h.exportSymbol("bindingHandlers",h.bindingHandlers),h.exportSymbol("applyBindings",h.applyBindings),h.exportSymbol("applyBindingsToDescendants",h.applyBindingsToDescendants),h.exportSymbol("applyBindingAccessorsToNode",h.applyBindingAccessorsToNode),h.exportSymbol("applyBindingsToNode",h.applyBindingsToNode),h.exportSymbol("contextFor",h.contextFor),h.exportSymbol("dataFor",h.dataFor)}(),s={"class":"className","for":"htmlFor"},h.bindingHandlers["attr"]={update:function(a,c){var e=h.utils.unwrapObservable(c())||{};h.utils.objectForEach(e,function(c,d){d=h.utils.unwrapObservable(d);var e=d===!1||null===d||d===b;e&&a.removeAttribute(c),h.utils.ieVersion<=8&&c in s?(c=s[c],e?a.removeAttribute(c):a[c]=d):e||a.setAttribute(c,d.toString()),"name"===c&&h.utils.setElementName(a,e?"":d.toString())})}},function(){h.bindingHandlers["checked"]={after:["value","attr"],init:function(a,c,e,f,g){function i(){return e["has"]("checkedValue")?h.utils.unwrapObservable(e.get("checkedValue")):a.value}function j(d,j,k){var n,o,p,q,v,w,l=a.checked!=b?a.checked:"checked"==a.getAttribute("checked"),m="undefined"!=typeof j?j:i();(!h.computedContext.isInitial()||d)&&(!r||l)&&(n=h.dependencyDetection.ignore(c),"function"!=typeof n||n.isKo?s?u!==m?(l?h.utils.addOrRemoveItem(n,m,!0):h.utils.addOrRemoveItem(n,m,!1),h.utils.addOrRemoveItem(n,u,!1),u=m):h.utils.addOrRemoveItem(n,m,l):t?("string"!=typeof n&&(n=""),o=n.split(/[\n\,][\s\n\t]*/gi),u!==m?(l?h.utils.addOrRemoveItem(o,m,!0):h.utils.addOrRemoveItem(o,m,!1),h.utils.addOrRemoveItem(o,u,!1),u=m):h.utils.addOrRemoveItem(o,m,l),h.utils.addOrRemoveItem(o,"",!1),h.expressionRewriting.writeValueToProperty(n,e,"checked",o.join(","),!0,a)):l?h.expressionRewriting.writeValueToProperty(n,e,"checked",m,!0,a):(m=e["has"]("unCheckedValue")?e.get("unCheckedValue"):m=0===m?1:1===m?0:m===!0?!1:!0,h.expressionRewriting.writeValueToProperty(n,e,"checked",m,!0,a)):n=n.call(a,{context:g,current:f,bind:e()},!0),p=ves(a).nexts("label:first"),a.checked?(r&&(ves(a.form[a.name]).attr("checked",null),ves("label[name="+a.name+"]").removeClass("checked")),a.setAttribute("checked","checked"),p.addClass("checked")):(a.removeAttribute("checked"),p.removeClass("checked")),"function"==typeof h.valueUpdate&&(q=e(),v={context:g,current:f,bind:q},h.valueUpdate.call(a,n,m,v,k),w=a.valueUpdated||q.valueUpdated,"function"==typeof w&&w.call(a,n,m,v,k)))}function k(){var d,k,l,m,b=h.utils.unwrapObservable(c());"function"!=typeof b||b.isKo?(s?a.checked=h.utils.arrayIndexOf(b,i())>=0:t?("string"!=typeof b&&(b=""),d=b.split(/[\n\,][\s\n\t]*/gi),a.checked=h.utils.arrayIndexOf(d,i())>=0):a.checked=b&&i()===b,(null==b||""==b)&&(e["has"]("default")?(k=e.get("default"),e["has"]("checkedValue")?(l=e.get("checkedValue"),k===l?(a.checked=!0,a.setAttribute("checked","checked")):(a.checked=!1,a.removeAttribute("checked"))):(a.checked=!1,a.removeAttribute("checked")),j(!0,k)):(a.checked=!1,a.removeAttribute("checked")))):(a.checked=b.call(a,{context:g,current:f,bind:e()}),a.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked")),m=ves(a).nexts("label:first"),a.checked||a.getAttribute("checked")?(r&&(ves(a.form[a.name]).attr("checked",null),ves("label[name="+a.name+"]").removeClass("checked")),a.setAttribute("checked","checked"),m.addClass("checked")):(a.removeAttribute("checked"),m.removeClass("checked"))}var l,m,n,o,p,q,r,s,t,u;a.valueUpdate=function(a){j(null,null,a)},"input"!=a.tagName.toLowerCase()&&(a.form||(l=ves(a).parents("form"),l=0==l.length?d.createElement("form"):l[0],a.form=l)),m=e(),n=m.name,n||(n=h.min?a.getAttribute("bind"):a.getAttribute("data-bind"),n=n.split(/checked[\s]*:[\s]*/gi),n=n[1].split(/[\s]*,/gi)[0],n=n.replace(/\./gi,"_"),m.name=n),o=a.name||a.getAttribute("name"),o||(o=n,g.$parent&&(o=ves(a).parents("[isKoContext]")[0].koID+n),a.name=o,a.setAttribute("name",o)),"input"!=a.tagName.toLowerCase()&&(a.name=o),a.id||(a.id=a.koID),a.form[o]==b&&(a.form[o]=a),p=ves(a).nexts("label:first"),p.attr("name",a.name),p.length>0&&p.noAttr("for")&&p.attr("for",a.id),q="checkbox"==a.getAttribute("type"),r="radio"==a.getAttribute("type"),(q||r)&&(s=q&&h.utils.unwrapObservable(c())instanceof Array,t=q&&!s&&a.name&&(a.form[a.name].length!=b||e["has"]("array")),u=s||t?i():b,h.computed(j,null,{disposeWhenNodeIsRemoved:a}),h.utils.registerEventHandler(a,"click",function(){"input"!=a.tagName.toLowerCase()&&(a.checked?r||(a.checked=!1,a.removeAttribute("checked")):(r&&ves(a.form[a.name]).attr("checked",null),a.checked=!0,a.setAttribute("checked","checked"))),j()}),h.computed(k,null,{disposeWhenNodeIsRemoved:a}))}},h.expressionRewriting.twoWayBindings["checked"]=!0}(),t="__ko__cssValue",h.bindingHandlers["css"]={update:function(a,b){var c=h.utils.unwrapObservable(b());"object"==typeof c?h.utils.objectForEach(c,function(b,c){c=h.utils.unwrapObservable(c),h.utils.toggleDomNodeCssClass(a,b,c)}):(c=String(c||""),h.utils.toggleDomNodeCssClass(a,a[t],!1),a[t]=c,h.utils.toggleDomNodeCssClass(a,c,!0))}},h.bindingHandlers["enable"]={update:function(a,b){var c=h.utils.unwrapObservable(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0,a.setAttribute("disabled","disabled"))}},h.bindingHandlers["disable"]={update:function(a,b){h.bindingHandlers["enable"]["update"](a,function(){return!h.utils.unwrapObservable(b())})}},h.bindingHandlers["event"]={init:function(a,b,c,d,e){var g,f=b();a=ves(a);for(g in f)!function(b,f){0==f[b]instanceof Array&&(f[b]=[f[b]]);for(var g=0;g<f[b].length;g++)"function"==typeof f[b][g]&&function(b,f){ves(a).bind(b,function(a){return f.call(ves.event.target,{context:e,current:d,bind:c(),event:a})},f)}(b,f[b][g])}(g,f)}},h.bindingHandlers["foreach"]={makeTemplateValueAccessor:function(a,b,c,d,e){return function(){var g,i,j,f=a();if("function"!=typeof f||f.isKo||(f=f.call(b,{context:e,current:d,bind:c()})),g=h.utils.peekObservable(f),!g||"number"==typeof g.length)return{foreach:f,templateEngine:h.nativeTemplateEngine.instance};if(h.utils.unwrapObservable(f),g.data&&g.data instanceof Array)return{foreach:g["data"],as:g["as"],includeDestroyed:g["includeDestroyed"],afterAdd:g["afterAdd"],beforeRemove:g["beforeRemove"],afterRender:g["afterRender"],beforeMove:g["beforeMove"],afterMove:g["afterMove"],templateEngine:h.nativeTemplateEngine.instance};if("object"==typeof g){if(g.data&&g.data instanceof Array)return{foreach:g.data,as:g["as"],templateEngine:h.nativeTemplateEngine.instance};i=[];for(j in g)i.push({key:j,value:g[j]});return{foreach:i,templateEngine:h.nativeTemplateEngine.instance}}}},init:function(a,b,c,d,e){return a.isKoContext=!0,h.bindingHandlers["template"]["init"](a,h.bindingHandlers["foreach"].makeTemplateValueAccessor(b,a,c,d,e))},update:function(a,b,c,d,e){return h.bindingHandlers["template"]["update"](a,h.bindingHandlers["foreach"].makeTemplateValueAccessor(b,a,c,d,e),c,d,e)}},h.expressionRewriting.bindingRewriteValidators["foreach"]=!1,h.virtualElements.allowedBindings["foreach"]=!0,u="__ko_hasfocusUpdating",v="__ko_hasfocusLastValue",h.bindingHandlers["hasfocus"]={init:function(a,b,c){var d=function(d){var e,f,i;if(a[u]=!0,e=a.ownerDocument,"activeElement"in e){try{f=e.activeElement}catch(g){f=e.body}d=f===a}i=b(),h.expressionRewriting.writeValueToProperty(i,c,"hasfocus",d,!0,a),a[v]=d,a[u]=!1},e=d.bind(null,!0),f=d.bind(null,!1);h.utils.registerEventHandler(a,"focus",e),h.utils.registerEventHandler(a,"focusin",e),h.utils.registerEventHandler(a,"blur",f),h.utils.registerEventHandler(a,"focusout",f)},update:function(a,b){var c=!!h.utils.unwrapObservable(b());a[u]||a[v]===c||(c?a.focus():a.blur(),h.dependencyDetection.ignore(h.utils.triggerEvent,null,[a,c?"focusin":"focusout"]))}},h.bindingHandlers["hasFocus"]=h.bindingHandlers["hasfocus"],h.expressionRewriting.twoWayBindings["hasFocus"]=!0,h.bindingHandlers["html"]={init:function(a,b,c){var e,d=h.utils.unwrapObservable(b());d&&0!=d.length||!c["has"]("default")||h.expressionRewriting.writeValueToProperty(null,c,"html","",!0,a),e=function(){var d=b(),e="text"==a.getAttribute("type")?a.innerText||a.textContent:a.innerHTML;h.expressionRewriting.writeValueToProperty(d,c,"html",e,!1,a)},a.getAttribute("contenteditable")&&h.utils.registerEventHandler(a,"blur",function(){e()})},update:function(a,b,c){var d=h.utils.unwrapObservable(b());h.validValue(a,d,c()),h.utils.setHtml(a,d)}},w("if"),w("ifnot",!1,!0),w("with",!0,!1,function(a,b){return a["createChildContext"](b)}),x={},h.bindingHandlers["options"]={init:function(a){for(a.isKoContext=!0;a.length>0;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(a,c,d){function e(){return h.utils.arrayFilter(a.options,function(a){return a.selected})}function q(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function s(b,c,e){var f,g,i;return e.length&&(n=e[0].selected?[h.selectExtensions.readValue(e[0])]:[],r=!0),f=a.ownerDocument.createElement("option"),b===x?(h.utils.setTextContent(f,d.get("optionsCaption")),h.selectExtensions.writeValue(f,"")):(g=q(b,d.get("optionsValue"),b),h.selectExtensions.writeValue(f,h.utils.unwrapObservable(g)),i=q(b,d.get("optionsText"),g),h.utils.setTextContent(f,i)),[f]}function t(b,c){if(n.length){var d=h.utils.arrayIndexOf(n,h.selectExtensions.readValue(c[0]))>=0;h.utils.setOptionNodeSelectionState(c[0],d),r&&!d&&h.dependencyDetection.ignore(h.utils.triggerEvent,null,[a,"change"])}}var l,m,n,o,p,r,u,f=0==a.length,g=!f&&a.multiple?a.scrollTop:null,i=h.utils.unwrapObservable(c()),j=d.get("optionsIncludeDestroyed"),k={};if(n=a.multiple?h.utils.arrayMap(e(),h.selectExtensions.readValue):a.selectedIndex>=0?[h.selectExtensions.readValue(a.options[a.selectedIndex])]:[],i){if(0==i instanceof Array)if("object"==typeof i){o=[];for(p in i)o.push({key:p,value:i[p]});i=o}else i=[i];m=h.utils.arrayFilter(i,function(a){return j||a===b||null===a||!h.utils.unwrapObservable(a["_destroy"])}),d["has"]("optionsCaption")&&(l=h.utils.unwrapObservable(d.get("optionsCaption")),null!==l&&l!==b&&m.unshift(x))}r=!1,k["beforeRemove"]=function(b){a.removeChild(b)},u=t,d["has"]("optionsAfterRender")&&(u=function(a,b){t(a,b),h.dependencyDetection.ignore(d.get("optionsAfterRender"),null,[b[0],a!==x?a:""])}),h.utils.setDomNodeChildrenFromArrayMapping(a,m,s,k,u),h.dependencyDetection.ignore(function(){if(d.get("valueAllowUnset")&&d["has"]("value"))h.selectExtensions.writeValue(a,h.utils.unwrapObservable(d.get("value")),!0);else{var b;b=a.multiple?n.length&&e().length<n.length:n.length&&a.selectedIndex>=0?h.selectExtensions.readValue(a.options[a.selectedIndex])!==n[0]:n.length||a.selectedIndex>=0,b&&h.utils.triggerEvent(a,"change")}}),h.utils.ensureSelectElementIsRenderedCorrectly(a),g&&Math.abs(g-a.scrollTop)>20&&(a.scrollTop=g)}},h.bindingHandlers["options"].optionValueDomDataKey=h.utils.domData.nextKey(),h.bindingHandlers["selectedOptions"]={after:["options","foreach"],init:function(a,b,c){h.utils.registerEventHandler(a,"change",function(){var d=b(),e=[];h.utils.arrayForEach(a.getElementsByTagName("option"),function(a){a.selected&&e.push(h.selectExtensions.readValue(a))}),h.expressionRewriting.writeValueToProperty(d,c,"selectedOptions",e,!1,a)})},update:function(a,b){if("select"!=h.utils.tagNameLower(a))throw new Error("values binding applies only to SELECT elements");var c=h.utils.unwrapObservable(b());c&&"number"==typeof c.length&&h.utils.arrayForEach(a.getElementsByTagName("option"),function(a){var b=h.utils.arrayIndexOf(c,h.selectExtensions.readValue(a))>=0;h.utils.setOptionNodeSelectionState(a,b)})}},h.expressionRewriting.twoWayBindings["selectedOptions"]=!0,h.bindingHandlers["style"]={update:function(a,b){var c=h.utils.unwrapObservable(b()||{});h.utils.objectForEach(c,function(b,c){c=h.utils.unwrapObservable(c),ves(a).css(b,c)})}},h.bindingHandlers["submit"]={init:function(a,b,c,d,e){if("function"!=typeof b())throw new Error("The value for a submit binding must be a function");h.utils.registerEventHandler(a,"submit",function(c){var d,f=b();try{d=f.call(e["$data"],a)}finally{d!==!0&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},h.bindingHandlers["text"]={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b,c,d,e){var f=b();"function"!=typeof f||f.isKo||(f=f.call(a,{context:e,current:d,bind:c()})),h.utils.setTextContent(a,f)}},h.virtualElements.allowedBindings["text"]=!0,h.bindingHandlers["uniqueName"]={init:function(a,b){if(b()){var c="ko_unique_"+ ++h.bindingHandlers["uniqueName"].currentIndex;h.utils.setElementName(a,c)}}},h.bindingHandlers["uniqueName"].currentIndex=0,h.bindingHandlers["value"]={after:["options","foreach"],init:function(a,b,c,d,e){var g,i,j,k,l,m,n,f=c();!a.name&&a.tagName&&"option"!=a.tagName.toLowerCase()&&(g=f.name,g||(g=h.min?a.getAttribute("bind"):a.getAttribute("data-bind"),g=g.split(/value[\s]*:[\s]*/gi),g=g[1].split(/[\s]*,/gi)[0],g=g.replace(/\./gi,"_"),f.name=g),i=g,e.$parent&&(i=ves(a).parents("[isKoContext]")[0].koID+g),a.name=i),j=["change"],k=c.get("valueUpdate"),l=!1,k&&("string"==typeof k&&(k=[k]),h.utils.arrayPushAll(j,k),j=h.utils.arrayGetDistinctValues(j)),m=h.utils.unwrapObservable(b()),"function"!=typeof m||m.isKo||(m=m.call(a,{context:e,current:d,bind:c()})),m&&0!=m.length||!c["has"]("default")||h.expressionRewriting.writeValueToProperty(null,c,"value","",!0,a),n=function(f){var g,i,j,k,m;l=!1,g=h.selectExtensions.readValue(a),i=b(),"function"!=typeof i||i.isKo?h.expressionRewriting.writeValueToProperty(i,c,"value",g,!1,a):i=i.call(a,{context:e,current:d,bind:c()},!0),"function"==typeof h.valueUpdate&&(j=c(),k={context:e,current:d,bind:j},h.valueUpdate.call(a,i,g,k,f),m=a.valueUpdated||j.valueUpdated,"function"==typeof m&&m.call(a,i,g,k,f))},a.valueUpdate=function(a){n(a)},h.utils.arrayForEach(j,function(b){var c=n;h.utils.stringStartsWith(b,"after")&&(c=function(){setTimeout(n,0)},b=b.substring("after".length)),h.utils.registerEventHandler(a,b,c)})},update:function(a,b,c,d,e){var g,i,j,k,f=h.utils.unwrapObservable(b());if("function"==typeof f&&(f=f.call(a,{context:e,current:d,bind:c()})),g=h.selectExtensions.readValue(a),i=f!==g,h.validValue(a,f,c()),i)if("select"===h.utils.tagNameLower(a))if(j=c.get("valueAllowUnset"),k=function(){h.selectExtensions.writeValue(a,f,j)},k(),j||f===h.selectExtensions.readValue(a))setTimeout(k,0);else{if(!a.koInit)return a.koInit=!0,void 0;h.dependencyDetection.ignore(h.utils.triggerEvent,null,[a,"change"])}else h.selectExtensions.writeValue(a,f)}},h.expressionRewriting.twoWayBindings["value"]=!0,h.bindingHandlers["visible"]={update:function(a,b){var c=h.utils.unwrapObservable(b()),d=!("none"==a.style.display);c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},h.templateEngine=function(){},h.templateEngine.prototype["renderTemplateSource"]=function(){throw new Error("Override renderTemplateSource")},h.templateEngine.prototype["createJavaScriptEvaluatorBlock"]=function(){throw new Error("Override createJavaScriptEvaluatorBlock")},h.templateEngine.prototype["makeTemplateSource"]=function(a,b){if("string"==typeof a){b=b||d;var c=b.getElementById(a);if(!c)throw new Error("Cannot find template with ID "+a);return new h.templateSources.domElement(c)}if(1==a.nodeType||8==a.nodeType)return new h.templateSources.anonymousTemplate(a);throw new Error("Unknown template type: "+a)},h.templateEngine.prototype["renderTemplate"]=function(a,b,c,d){var e=this["makeTemplateSource"](a,d);return this["renderTemplateSource"](e,b,c)},h.templateEngine.prototype["isTemplateRewritten"]=function(a,b){return this["allowTemplateRewriting"]===!1?!0:this["makeTemplateSource"](a,b)["data"]("isRewritten")},h.templateEngine.prototype["rewriteTemplate"]=function(a,b,c){var d=this["makeTemplateSource"](a,c),e=b(d["text"]());d["text"](e),d["data"]("isRewritten",!0)},h.exportSymbol("templateEngine",h.templateEngine),h.templateRewriting=function(){function c(a){var c,d,e,f,b=h.expressionRewriting.bindingRewriteValidators;for(c=0;c<a.length;c++)if(d=a[c]["key"],b.hasOwnProperty(d))if(e=b[d],"function"==typeof e){if(f=e(a[c]["value"]))throw new Error(f)}else if(!e)throw new Error("This template engine does not support the '"+d+"' binding within its templates")}function d(a,b,d,e){var g,i,f=h.expressionRewriting.parseObjectLiteral(a);return c(f),g=h.expressionRewriting.preProcessBindings(f,{valueAccessors:!0}),i="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+g+" } })()},'"+d.toLowerCase()+"')",e["createJavaScriptEvaluatorBlock"](i)+b}var a=/(<([a-z]+\d*)(?:\s+(?!bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)bind\s*=\s*(["'])([\s\S]*?)\3/gi,b=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(a,b,c){b["isTemplateRewritten"](a,c)||b["rewriteTemplate"](a,function(a){return h.templateRewriting.memoizeBindingAttributeSyntax(a,b)},c)},memoizeBindingAttributeSyntax:function(c,e){return c.replace(a,function(){return d(arguments[4],arguments[1],arguments[2],e)}).replace(b,function(){return d(arguments[1],"<!-- ko -->","#comment",e)})},applyMemoizedBindingsToNextSibling:function(a,b){return h.memoization.memoize(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&h.applyBindingAccessorsToNode(e,a,d)})}}}(),h.exportSymbol("__tr_ambtns",h.templateRewriting.applyMemoizedBindingsToNextSibling),function(){var a,c;h.templateSources={},h.templateSources.domElement=function(a){this.domElement=a},h.templateSources.domElement.prototype["text"]=function(){var c,a=h.utils.tagNameLower(this.domElement),b="script"===a?"text":"textarea"===a?"value":"innerHTML";return 0==arguments.length?this.domElement[b]:(c=arguments[0],"innerHTML"===b?h.utils.setHtml(this.domElement,c):this.domElement[b]=c,void 0)},a=h.utils.domData.nextKey()+"_",h.templateSources.domElement.prototype["data"]=function(b){return 1===arguments.length?h.utils.domData.get(this.domElement,a+b):(h.utils.domData.set(this.domElement,a+b,arguments[1]),void 0)},c=h.utils.domData.nextKey(),h.templateSources.anonymousTemplate=function(a){this.domElement=a},h.templateSources.anonymousTemplate.prototype=new h.templateSources.domElement,h.templateSources.anonymousTemplate.prototype.constructor=h.templateSources.anonymousTemplate,h.templateSources.anonymousTemplate.prototype["text"]=function(){var a,d;return 0==arguments.length?(a=h.utils.domData.get(this.domElement,c)||{},a.textData===b&&a.containerData&&(a.textData=a.containerData.innerHTML),a.textData):(d=arguments[0],h.utils.domData.set(this.domElement,c,{textData:d}),void 0)},h.templateSources.domElement.prototype["nodes"]=function(){var a,b;return 0==arguments.length?(a=h.utils.domData.get(this.domElement,c)||{},a.containerData):(b=arguments[0],h.utils.domData.set(this.domElement,c,{containerData:b}),void 0)},h.exportSymbol("templateSources",h.templateSources),h.exportSymbol("templateSources.domElement",h.templateSources.domElement),h.exportSymbol("templateSources.anonymousTemplate",h.templateSources.anonymousTemplate)}(),function(){function c(a,b,c){for(var d,e=a,f=h.virtualElements.nextSibling(b);e&&(d=e)!==f;)e=h.virtualElements.nextSibling(d),c(d,e)}function d(a,b){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=h.bindingProvider["instance"],i=g["preprocessNode"];if(i){if(c(d,e,function(a,b){var c=a.previousSibling,f=i.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),h.utils.fixUpContinuousNodeArray(a,f))}c(d,e,function(a){(1===a.nodeType||8===a.nodeType)&&h.applyBindings(b,a)}),c(d,e,function(a){(1===a.nodeType||8===a.nodeType)&&h.memoization.unmemoizeDomNodeAndDescendants(a,[b])}),h.utils.fixUpContinuousNodeArray(a,f)}}function e(a){return a.nodeType?a:a.length>0?a[0]:null}function f(b,c,f,g,i){var j,k,l,m,n;if(i=i||{},j=b&&e(b),k=j&&j.ownerDocument,l=i["templateEngine"]||a,h.templateRewriting.ensureTemplateIsRewritten(f,l,k),m=l["renderTemplate"](f,g,i,k),"number"!=typeof m.length||m.length>0&&"number"!=typeof m[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");switch(n=!1,c){case"replaceChildren":h.virtualElements.setDomNodeChildren(b,m),n=!0;break;case"replaceNode":h.utils.replaceDomNodes(b,m),n=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+c)}return n&&(d(m,g),i["afterRender"]&&h.dependencyDetection.ignore(i["afterRender"],null,[m,g["$data"]])),m}function i(a,c){var d=h.utils.domData.get(a,g);d&&"function"==typeof d.dispose&&d.dispose(),h.utils.domData.set(a,g,c&&c.isActive()?c:b)}var a,g;h.setTemplateEngine=function(c){if(c!=b&&!(c instanceof h.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");a=c},h.renderTemplate=function(c,d,g,i,j){var k,l,m;if(g=g||{},(g["templateEngine"]||a)==b)throw new Error("Set a template engine before calling renderTemplate");return j=j||"replaceChildren",i?(k=e(i),l=function(){return!k||!h.utils.domNodeIsAttachedToDocument(k)},m=k&&"replaceNode"==j?k.parentNode:k,h.dependentObservable(function(){var a=d&&d instanceof h.bindingContext?d:new h.bindingContext(h.utils.unwrapObservable(d)),b=h.isObservable(c)?c():"function"==typeof c?c(a["$data"],a):c,l=f(i,j,b,a,g);"replaceNode"==j&&(i=l,k=e(i))},null,{disposeWhen:l,disposeWhenNodeIsRemoved:m})):h.memoization.memoize(function(a){h.renderTemplate(c,d,g,a,"replaceNode")})},h.renderTemplateForEach=function(a,c,e,g,i){var j,k=function(b,c){j=i["createChildContext"](b,e["as"],function(a){a["$index"]=c});var d="function"==typeof a?a(b,j):a;return f(null,"ignoreTargetNode",d,j,e)},l=function(a,b){d(b,j),e["afterRender"]&&e["afterRender"](b,a)};return h.dependentObservable(function(){var d,a=h.utils.unwrapObservable(c)||[];"undefined"==typeof a.length&&(a=[a]),d=h.utils.arrayFilter(a,function(a){return e["includeDestroyed"]||a===b||null===a||!h.utils.unwrapObservable(a["_destroy"])}),h.dependencyDetection.ignore(h.utils.setDomNodeChildrenFromArrayMapping,null,[g,d,k,e,l])},null,{disposeWhenNodeIsRemoved:g})},g=h.utils.domData.nextKey(),h.bindingHandlers["template"]={init:function(a,b){var d,e,c=h.utils.unwrapObservable(b());return"string"==typeof c||c["name"]?h.virtualElements.emptyNode(a):(d=h.virtualElements.childNodes(a),e=h.utils.moveCleanedNodesToContainerElement(d),new h.templateSources.anonymousTemplate(a)["nodes"](e)),{controlsDescendantBindings:!0}},update:function(a,b,c,d,e){var g,m,n,o,f=b(),j=h.utils.unwrapObservable(f),k=!0,l=null;"string"==typeof j?(m=f,j={}):(m=j["name"],"if"in j&&(k=h.utils.unwrapObservable(j["if"])),k&&"ifnot"in j&&(k=!h.utils.unwrapObservable(j["ifnot"])),g=h.utils.unwrapObservable(j["data"])),"foreach"in j?(n=k&&j["foreach"]||[],l=h.renderTemplateForEach(m||a,n,j,a,e)):k?(o="data"in j?e["createChildContext"](g,j["as"]):e,l=h.renderTemplate(m||a,o,j,a)):h.virtualElements.emptyNode(a),i(a,l)}},h.expressionRewriting.bindingRewriteValidators["template"]=function(a){var b=h.expressionRewriting.parseObjectLiteral(a);return 1==b.length&&b[0]["unknown"]?null:h.expressionRewriting.keyValueArrayContainsKey(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"},h.virtualElements.allowedBindings["template"]=!0}(),h.exportSymbol("setTemplateEngine",h.setTemplateEngine),h.exportSymbol("renderTemplate",h.renderTemplate),h.utils.findMovesInArrayComparison=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||c>d)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g["value"]===h["value"]){g["moved"]=h["index"],h["moved"]=g["index"],b.splice(f,1),d=f=0;break}d+=f}}},h.utils.compareArrays=function(){function c(c,e,f){return f="boolean"==typeof f?{dontLimitMoves:f}:f||{},c=c||[],e=e||[],c.length<=e.length?d(c,e,a,b,f):d(e,c,b,a,f)}function d(a,b,c,d,e){var j,l,p,q,r,s,t,u,w,v,x,y,f=Math.min,g=Math.max,i=[],k=a.length,m=b.length,n=m-k||1,o=k+m+1;for(j=0;k>=j;j++)for(q=p,i.push(p=[]),r=f(m,j+n),s=g(0,j-1),l=s;r>=l;l++)l?j?a[j-1]===b[l-1]?p[l]=q[l-1]:(t=q[l]||o,u=p[l-1]||o,p[l]=f(t,u)+1):p[l]=l+1:p[l]=j+1;for(v=[],x=[],y=[],j=k,l=m;j||l;)w=i[j][l]-1,l&&w===i[j][l-1]?x.push(v[v.length]={status:c,value:b[--l],index:l}):j&&w===i[j-1][l]?y.push(v[v.length]={status:d,value:a[--j],index:j}):(--l,--j,e["sparse"]||v.push({status:"retained",value:b[l]}));return h.utils.findMovesInArrayComparison(x,y,10*k),v.reverse()}var a="added",b="deleted";return c}(),h.exportSymbol("utils.compareArrays",h.utils.compareArrays),function(){function a(a,c,d,e,f){var g=[],i=h.dependentObservable(function(){var b=c(d,f,h.utils.fixUpContinuousNodeArray(g,a))||[];g.length>0&&(h.utils.replaceDomNodes(g,b),e&&h.dependencyDetection.ignore(e,null,[d,b,f])),g.length=0,h.utils.arrayPushAll(g,b)},null,{disposeWhenNodeIsRemoved:a,disposeWhen:function(){return!h.utils.anyDomNodeIsAttachedToDocument(g)}});return{mappedNodes:g,dependentObservable:i.isActive()?i:b}}var c=h.utils.domData.nextKey();h.utils.setDomNodeChildrenFromArrayMapping=function(d,e,f,g,i){function w(a,b){v=k[b],p!==b&&(t[a]=v),v.indexObservable(p++),h.utils.fixUpContinuousNodeArray(v.mappedNodes,d),n.push(v),r.push(v)}function x(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&h.utils.arrayForEach(b[c].mappedNodes,function(d){a(d,c,b[c].arrayEntry)})}var j,k,l,m,n,o,p,q,r,s,t,u,v,z,A,y,C,D,B,E;for(e=e||[],g=g||{},j=h.utils.domData.get(d,c)===b,k=h.utils.domData.get(d,c)||[],l=h.utils.arrayMap(k,function(a){return a.arrayEntry}),m=h.utils.compareArrays(l,e,g["dontLimitMoves"]),n=[],o=0,p=0,q=[],r=[],s=[],t=[],u=[],y=0;z=m[y];y++)switch(A=z["moved"],z["status"]){case"deleted":A===b&&(v=k[o],v.dependentObservable&&v.dependentObservable.dispose(),q.push.apply(q,h.utils.fixUpContinuousNodeArray(v.mappedNodes,d)),g["beforeRemove"]&&(s[y]=v,r.push(v))),o++;break;case"retained":w(y,o++);break;case"added":A!==b?w(y,A):(v={arrayEntry:z["value"],indexObservable:h.observable(p++)},n.push(v),r.push(v),j||(u[y]=v))}for(x(g["beforeMove"],t),h.utils.arrayForEach(q,g["beforeRemove"]?h.cleanNode:h.removeNode),y=0,B=h.virtualElements.firstChild(d);v=r[y];y++){for(v.mappedNodes||h.utils.extend(v,a(d,f,v.arrayEntry,i,v.indexObservable)),E=0;D=v.mappedNodes[E];B=D.nextSibling,C=D,E++)D!==B&&h.virtualElements.insertAfter(d,D,C);!v.initialized&&i&&(i(v.arrayEntry,v.mappedNodes,v.indexObservable),v.initialized=!0)}x(g["beforeRemove"],s),x(g["afterMove"],t),x(g["afterAdd"],u),h.utils.domData.set(d,c,n)}}(),h.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",h.utils.setDomNodeChildrenFromArrayMapping),h.nativeTemplateEngine=function(){this["allowTemplateRewriting"]=!1},h.nativeTemplateEngine.prototype=new h.templateEngine,h.nativeTemplateEngine.prototype.constructor=h.nativeTemplateEngine,h.nativeTemplateEngine.prototype["renderTemplateSource"]=function(a){var g,d=!(h.utils.ieVersion<9),e=d?a["nodes"]:null,f=e?a["nodes"]():null;return f?h.utils.makeArray(f.cloneNode(!0).childNodes):(g=a["text"](),h.utils.parseHtmlFragment(g))},h.nativeTemplateEngine.instance=new h.nativeTemplateEngine,h.setTemplateEngine(h.nativeTemplateEngine.instance),h.exportSymbol("nativeTemplateEngine",h.nativeTemplateEngine)})}(),function(){ko.ifArray=[];var a=[],b=[];ko.ready=function(b){"function"==typeof b&&a.push(b)},ko.binded=function(a){"function"==typeof a&&b.push(a)},ko.bind=function(c,d,e){var f,g;for(c||(c={}),f=!0,g=0;g<a.length;g++)f=a[g].call(c);if(0==f)return!1;for(a.length=0,d=d?ves(d)[0]:ves.html[0],ko.min=e===!1?!1:!0,ko.applyBindings(c,d),g=0;g<b.length;g++)b[g].call(c);return b.length=0,c}}()}();
